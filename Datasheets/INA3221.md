Product Sample & Technical Tools & Support & Folder![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.001.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.002.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.003.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.004.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.005.png) Buy Documents Software Community

[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.006.png)

SBOS576B–MAY 2012–REVISED MARCH 2016![ref1]

**INA3221Triple-Channel,High-SideMeasurement,\
ShuntandBusVoltageMonitorwithI2C-andSMBUS-CompatibleInterface![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.008.png)**

<a name="_page0_x0.00_y120.40"></a>**1 Features**

- Senses Bus Voltages From 0 V to 26 V
- Reports Shunt and Bus Voltage
- High Accuracy:
  - Offset Voltage: ±80 µV (max)
  - Gain Error: 0.25% (max)
- Configurable Averaging Options
- Four Programmable Addresses
- Programmable Alert and Warning Outputs
- Power-Supply Operation: 2.7 V to 5.5 V

**2 Applications**

- Computers
- Power Management
- Telecom Equipment
- Battery Chargers
- Power Supplies
- Test Equipment

**3 Description**

<a name="_page0_x0.00_y138.60"></a>The INA3221 is a three-channel, high-side current and bus voltage monitor with an I2C- and SMBUS-

compatible interface. The INA3221 monitors both shunt voltage drops and bus supply voltages, in addition to having programmable conversion times and averaging modes for these signals. The INA3221 offers both critical and warning alerts to detect multiple programmable out-of-range conditions for each channel.

The INA3221 senses current on buses that can vary from 0 V to 26 V. The device is powered from a single 2.7-V to 5.5-V supply, and draws 350 μA (typ) <a name="_page0_x0.00_y274.50"></a>of supply current. The INA3221 is specified over the operating temperature range of –40°C to +125°C. The I2C- and SMBUS-compatible interface features four programmable addresses.

**Device Information[**(1)**](#_page0_x0.00_y372.40)**

|**PART NUMBER**|**PACKAGE**|**BODY SIZE (NOM)**|
| - | - | - |
|INA3221|VQFN (16)|4\.00 mm x 4.00 mm|

<a name="_page0_x0.00_y372.40"></a>(1) For all available packages, see the package option addendum

at the end of the datasheet.

<a name="_page0_x0.00_y401.40"></a>**Typical Application**

Power Supply 

(0 V to 26 V) CBYPASS

0\.1 µF![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.009.png)

Load 1

VS (Supply 

VIN+1 VIN±1 Voltage) 10 k

Power Supply 

(0 V to 26 V) SDA

2

CH 1 IanCd- SCL

Bus SMBus-

V CH 2 Voltages 1-3 Compatible A0

IN+2 Shunt Interface VPU VS VIN±2 ADC Voltages 1-3

Critical Limit  10 k

Alerts 1-3 VPU

Power Valid (PV)

CH 3 Shunt Voltage 

Load 2 Critical

Sum Alerts 

Warning Timing Control (TC)

GND

VIN+3 VIN±3

Power Supply 

(0 V to 26 V) Load 3![ref1]

An IMPORTANT NOTICE at the end of this data sheet addresses availability, warranty, changes, use in safety-critical applications, intellectual![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.010.png) property matters and other important disclaimers. PRODUCTION DATA.

[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

SBOS576B–MAY 2012–REVISED MARCH 2016 **[**www.ti.com**](http://www.ti.com)![ref3]**

**Table of Contents**

2  [*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221) Copyright © 2012–2016, Texas Instruments Incorporated

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

SBOS576B–MAY 2012–REVISED MARCH 2016 **[**www.ti.com**](http://www.ti.com)![ref3]**

1  **Features**.................................................................. [1](#_page0_x0.00_y120.40)
1  **Applications** ........................................................... [1](#_page0_x0.00_y274.50)
1  **Description**............................................................. [1](#_page0_x0.00_y120.40)
1  **Revision History**..................................................... [2](#_page1_x0.00_y326.10)
1  **Device Comparison Table**..................................... [4](#_page3_x0.00_y72.00)
1  **Pin Configuration and Functions**......................... [4](#_page3_x0.00_y191.80)
1  **Specifications**......................................................... [5](#_page4_x0.00_y72.00)
1. Absolute Maximum Ratings...................................... [5](#_page4_x0.00_y95.90)
1. ESD Ratings.............................................................. [5](#_page4_x0.00_y370.80)
1. Recommended Operating Conditions....................... [5](#_page4_x0.00_y472.10)
1. Thermal Information.................................................. [5](#_page4_x0.00_y552.80)
1. Electrical Characteristics........................................... [6](#_page5_x0.00_y72.00)
6. Typical Characteristics.............................................. [7](#_page6_x0.00_y72.00)
8  **Detailed Description**............................................ [10](#_page9_x0.00_y72.00)
1. Overview................................................................. [10](#_page9_x0.00_y99.00)
1. Functional Block Diagram....................................... [10](#_page9_x0.00_y182.80)
1. Feature Description................................................. [11](#_page10_x0.00_y72.00)
1. Device Functional Modes........................................ [16](#_page15_x0.00_y72.00)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.013.png)
5. Programming .......................................................... [20](#_page19_x0.00_y72.00)
5. Register Maps......................................................... [24](#_page23_x0.00_y72.00)
9  **Application and Implementation**........................ [36](#_page35_x0.00_y72.00)
1. Application Information............................................ [36](#_page35_x0.00_y174.90)
1. Typical Application................................................. [36](#_page35_x0.00_y236.70)

**10 Power Supply Recommendations**..................... [38 ](#_page37_x0.00_y72.00)**11 Layout**................................................................... [38](#_page37_x0.00_y198.80)

1. Layout Guidelines................................................. [38](#_page37_x0.00_y225.80)
1. Layout Example.................................................... [38](#_page37_x0.00_y320.60)

**12 Device and Documentation Support**................. [39](#_page38_x0.00_y72.00)

1. Device Support...................................................... [39](#_page38_x0.00_y99.00)
1. Documentation Support ....................................... [39](#_page38_x0.00_y160.70)
1. Community Resources.......................................... [39](#_page38_x0.00_y222.40)
1. Trademarks........................................................... [39](#_page38_x0.00_y349.30)
1. Electrostatic Discharge Caution............................ [39](#_page38_x0.00_y391.80)
1. Glossary................................................................ [39](#_page38_x0.00_y460.30)

**13 Mechanical, Packaging, and Orderable**

**Information**........................................................... [39](#_page38_x0.00_y519.40)

2  [*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221) Copyright © 2012–2016, Texas Instruments Incorporated

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

SBOS576B–MAY 2012–REVISED MARCH 2016 **[**www.ti.com**](http://www.ti.com)![ref3]**

<a name="_page1_x0.00_y326.10"></a>**4 Revision History**

NOTE: Page numbers for previous revisions may differ from page numbers in the current version.

**Changes from Revision A (June 2013) to Revision B Page![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.014.png)**

- Added *Device Information*and *ESD Ratings* tables, and *Feature Description*, *Device Functional Modes*, *Application*

  *and Implementation*, *Power Supply Recommendations*, *Layout*, *Device and Documentation Support*, and

  *Mechanical, Packaging, and Orderable Information* sections................................................................................................ [1](#_page0_x0.00_y138.60)

- Deleted trace from SDA to SCL, and added missing connector dot to VS in front-page diagram ........................................ [1](#_page0_x0.00_y401.40)
- Added (VIN+) + (VIN–) / 2 to common-mode analog inputs in the *Absolute Maximum Ratings* table ..................................... [5](#_page4_x0.00_y166.30)
- Deleted VBUS from analog inputs in *Absolute Maximum Ratings* table ............................................................................... [5](#_page4_x0.00_y179.50)
- Added operating temperature to *Absolute Maximum Ratings* table....................................................................................... [5](#_page4_x0.00_y271.90)
- Changed all VSENSE to VSHUNT throughout data sheet for consistency.................................................................................... [6](#_page5_x0.00_y127.20)
- Changed "Status register" to "Mask/Enable register" to clarify register name in *Basic ADC Functions* section ................. [11](#_page10_x0.00_y616.10)
- Changed *Critical Alert* section text for clarity. ...................................................................................................................... [12](#_page11_x0.00_y151.80)
- Added Summation Control Function section........................................................................................................................ [12](#_page11_x0.00_y284.50)
- Changed external "RPU" to "RPU\_ext" in Figure 20 ................................................................................................................. [14](#_page13_x0.00_y146.00)
- Changed *Multiple Channel Monitoring* section text for clarity. ............................................................................................ [17](#_page16_x0.00_y107.90)
- Added X and Y axis labels to Figure 25............................................................................................................................... [18](#_page17_x0.00_y399.60)
- Changed "bidirectional" to "I/O" in second paragraph of *Bus Overview* section.................................................................. [20](#_page19_x0.00_y138.70)
- Changed VS+ to VS in Table 1.............................................................................................................................................. [20](#_page19_x0.00_y438.90)
- Changed references in Figure 30 to point to correct notes.................................................................................................. [22](#_page21_x0.00_y83.00)
- Changed Figure 31............................................................................................................................................................... [23](#_page22_x0.00_y83.00)
- Changed values in Table 2, *Bus Timing Definitions*............................................................................................................. [23](#_page22_x0.00_y234.40)
- Added data valid time to Table 2, *Bus Timing Definitions*.................................................................................................... [23](#_page22_x0.00_y234.40)
- Changed fall time to split data and clock times in Table 2, *Bus Timing Definitions*............................................................. [23](#_page22_x0.00_y234.40)
- Deleted rise time for data in Table 2, *Bus Timing Definitions*.............................................................................................. [23](#_page22_x0.00_y234.40)
- Deleted trace from SDA to SCL, and added missing connector dot to VS in Figure 52 ...................................................... [36](#_page35_x0.00_y369.50)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.015.png)![ref4]

2  [*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221) Copyright © 2012–2016, Texas Instruments Incorporated

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

**Changes from Original (May 2012) to Revision A Page![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.017.png)**

- Changed *Shunt voltage input range* parameter values in *Electrical Characteristics* table..................................................... [6](#_page5_x0.00_y127.20)
- Updated Figure 19................................................................................................................................................................ [13](#_page12_x0.00_y205.90)
- Changed second paragraph of *Serial Bus Address* section................................................................................................. [20](#_page19_x0.00_y395.00)
- Updated Figure 27 and note (1)........................................................................................................................................... [21](#_page20_x0.00_y142.90)
- Updated Figure 28 and note (1)........................................................................................................................................... [21](#_page20_x0.00_y550.10)
- Updated Figure 29 and note (1)........................................................................................................................................... [22](#_page21_x0.00_y83.00)
- Updated Figure 30 and note (1)........................................................................................................................................... [22](#_page21_x0.00_y298.50)
- Changed bit D15 in Power Valid Upper Limit Register ........................................................................................................ [34](#_page33_x0.00_y195.50)
- Changed bit D15 in Power Valid Lower Limit Register ........................................................................................................ [34](#_page33_x0.00_y478.40)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.018.png)![ref4]

<a name="_page3_x0.00_y72.00"></a>**5 Device Comparison Table**



|**DEVICE**|**DESCRIPTION**|
| - | - |
|[INA226](http://www.ti.com/product/ina226)|36-V, Bidirectional, Ultrahigh Accuracy, Low- or High-Side, I2C Out, Current and Power Monitor With Alert|
|[INA219](http://www.ti.com/product/ina219)|26-V, Bidirectional, Zero-Drift, High-Side, I2C Out, Current and Power Monitor|
|[INA209](http://www.ti.com/product/ina209)|26-V, Bidirectional, Low- or High-Side, I2C Out, Current and Power Monitor and High-Speed Comparator|
|[INA210](http://www.ti.com/product/ina210), [INA211](http://www.ti.com/product/ina211), [INA212](http://www.ti.com/product/ina212), [INA213](http://www.ti.com/product/ina213), [INA214](http://www.ti.com/product/ina214)|26-V, Bidirectional, Zero-Drift, High-Accuracy, Low- or High-Side, Voltage Out, Current Shunt Monitor|

<a name="_page3_x0.00_y191.80"></a>**6 Pin Configuration and Functions**

**RGV Package 16-Pin VQFN Top View**

IN3 1 12 IN+1 IN+3![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.019.png) 2 11 IN1 GND 3 10 PV

VS 4 9 Critical

**Pin Functions![ref4]**

||**PIN**|**I/O**|**DESCRIPTION**|
| :- | - | - | - |
|**NAME**|**NO.**|||
|A0|5|Digital input|Address pin. Connect to GND, SCL, SDA, or VS. [Table 1](#_page19_x0.00_y454.90) shows pin settings and corresponding addresses.|
|Critical|9|Digital output|Conversion-triggered critical alert; open-drain output.|
|GND|3|Analog|Ground|
|IN–1|11|Analog input|Connect to load side of the channel 1 shunt resistor. Bus voltage is the measurement from this pin to ground.|
|IN+1|12|Analog input|Connect to supply side of the channel 1 shunt resistor.|
|IN–2|14|Analog input|Connect to load side of the channel 2 shunt resistor. Bus voltage is the measurement from this pin to ground.|
|IN+2|15|Analog input|Connect to supply side of the channel 2 shunt resistor.|
|IN–3|1|Analog input|Connect to load side of the channel 3 shunt resistor. Bus voltage is the measurement from this pin to ground.|
|IN+3|2|Analog input|Connect to supply side of the channel 3 shunt resistor.|
|PV|10|Digital output|Power valid alert; open-drain output.|
|SCL|6|Digital input|Serial bus clock line; open-drain input.|
|SDA|7|Digital I/O|Serial bus data line; open-drain input/output.|
|TC|13|Digital output|Timing control alert; open-drain output.|
|VPU|16|Analog input|Pull-up supply voltage used to bias power valid output circuitry.|
|VS|4|Analog|Power supply, 2.7 V to 5.5 V.|
|Warning|8|Digital output|Averaged measurement warning alert; open-drain output.|

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 5

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

<a name="_page4_x0.00_y72.00"></a>**7 Specifications**

1. **Absolute<a name="_page4_x0.00_y95.90"></a> Maximum Ratings**

over operating free-air temperature range (unless otherwise noted)(1)

|||**MIN**|**MAX**|**UNIT**||
| :- | :- | - | - | - | :- |
|Voltage|Supply, VS||6|V||
|Analog inputs|<a name="_page4_x0.00_y166.30"></a>IN+, IN–|Differential (VIN+) – (VIN–)(2)|–26|26|V|
|||Common-mode (VIN+) + (VIN–) / 2|–0.3|26||
||<a name="_page4_x0.00_y179.50"></a>VPU||26|||
|Digital outputs|Critical, warning, power valid||6|V||
||Timing control||26|||
|Serial bus|Data line, SDA|(GND – 0.3)|6|V||
||Clock line, SCL|(GND – 0.3)|(VS + 0.3)|||
|Current|Input, into any pin||5|mA||
||Open-drain, digital output||10|||
||<a name="_page4_x0.00_y271.90"></a>Operating, TA|–40|125|||
|Temperature|Junction, TJ||150|°C||
||Storage, Tstg|–65|150|||


1) Stresses beyond those listed under *Absolute Maximum Ratings* may cause permanent damage to the device. These are stress ratings only, which do not imply functional operation of the device at these or any other conditions beyond those indicated under *Recommended Operating Conditions*. Exposure to absolute-maximum-rated conditions for extended periods may affect device reliability.
1) VIN+ and VIN– can have a differential voltage of –26 V to +26 V; however, the voltage at these pins must not exceed the range of

   –0.3 V to +26 V.

2. **ESD<a name="_page4_x0.00_y370.80"></a> Ratings**

|||**VALUE**|**UNIT**|
| :- | :- | - | - |
|V(ESD) Electrostatic discharge|Human-body model (HBM), per ANSI/ESDA/JEDEC JS-001(1)|±2500|V|
||Charged-device model (CDM), per JEDEC specification JESD22-C101(2)|±1000||
||Machine model|±200||


1) JEDEC document JEP155 states that 500-V HBM allows safe manufacturing with a standard ESD control process.
1) JEDEC document JEP157 states that 250-V CDM allows safe manufacturing with a standard ESD control process.

   3. **Recommended<a name="_page4_x0.00_y472.10"></a> Operating Conditions**

over operating free-air temperature range (unless otherwise noted)

||**MIN NOM MAX**|**UNIT**|
| :- | - | - |
|Operating supply voltage|2\.7 5.5|V|
|Operating temperature, TA|–40 125|°C|

4. **Thermal<a name="_page4_x0.00_y552.80"></a> Information**

|||**INA3221**||
| :- | :- | - | :- |
||**THERMAL METRIC(1)**|**RGV (VQFN)**|**UNIT**|
|||**16 PINS**||
|RθJA|Junction-to-ambient thermal resistance|36\.5|°C/W|
|RθJC(top)|Junction-to-case (top) thermal resistance|42\.7|°C/W|
|RθJB|Junction-to-board thermal resistance|14\.7|°C/W|
|ψJT|Junction-to-top characterization parameter|0\.5|°C/W|
|ψJB|Junction-to-board characterization parameter|14\.8|°C/W|
|RθJC(bot)|Junction-to-case (bottom) thermal resistance|3\.3|°C/W|

(1) For more information about traditional and new thermal metrics, see the *Semiconductor and IC Package Thermal Metrics* application

report ([SPRA953](http://www.ti.com/lit/pdf/spra953)).![ref4]

5. **Electrical<a name="_page5_x0.00_y72.00"></a> Characteristics**

at TA = 25°C, VS = 3.3 V, VIN+ = 12 V, VSHUNT = (VIN+) – (VIN–) = 0 mV, and VBUS = VIN– = 12 V (unless otherwise noted)

|**PARAMETER**|**TEST CONDITIONS**|**MIN**|**TYP**|**MAX**|**UNIT**|||
| - | - | - | - | - | - | :- | :- |
|**INPUT**||||||||
|<a name="_page5_x0.00_y127.20"></a>VSHUNT Shunt voltage input||–163.84||163\.8|mV|||
|VBUS Bus voltage input||0||26|V|||
|CMR Common-mode rejection|VIN+ = 0 V to +26 V|110|120||dB|||
|VOS|Shunt offset voltage, RTI(1)|||±40|±80|μV||
|||TA = –40°C to +125°C||0\.1|0\.5|μV/°C||
|PSRR||vs power supply, VS = 2.7 V to 5.5 V||15||μV/V||
|VOS|Bus offset voltage, RTI(1)|||±8|±16|mV||
|||TA = –40°C to +125°C|||80|μV/°C||
|PSRR||vs power supply||0\.5||mV/V||
|IIN+ Input bias current at IN+|||10||μA|||
|IIN– Input bias current at IN–|||10 || 670||μA || kΩ|||
|Input leakage(2)|(IN+ pin) + (IN– pin), power-down mode||0\.1|0\.5|μA|||
|**DC ACCURACY**||||||||
|ADC native resolution|||13||Bits|||
|1-LSB step size|Shunt voltage||40||μV|||
||Bus voltage||8||mV|||
|Shunt voltage gain error|||0\.1%|0\.25%||||
||TA = –40°C to +125°C||10|50|ppm/°C|||
|Bus voltage gain error|||0\.1%|0\.25%||||
||TA = –40°C to +125°C||10|50|ppm/°C|||
|DNL Differential nonlinearity|||±0.1||LSB|||
||CT bit = 000||140|154||||
||CT bit = 001||204|224|µs|||
||CT bit = 010||332|365||||
|tCONVERT ADC conversion time|CT bit = 011||588|646||||
||CT bit = 100||1\.1|1\.21||||
||CT bit = 101||2\.116|2\.328|ms|||
||CT bit = 110||4\.156|4\.572||||
||CT bit = 111||8\.244|9\.068||||
|**SMBus**||||||||
|SMBus timeout(3)|||28|35|ms|||
|**DIGITAL INPUT/OUTPUT**||||||||
|CI Input capacitance|||3||pF|||
|Leakage input current|0 V ≤ VIN ≤ VS||0\.1|1|μA|||
|VIH High-level input voltage||0\.7 (VS)||6|V|||
|VIL Low-level input voltage||–0.5||0\.3 (VS)|V|||
|<p>Low-level output voltage</p><p>VOL</p>|SDA, critical, warning, PV|VS > +2.7 V, IOL = 3 mA|0||0\.4|V||
||TC|VS > +2.7 V, IOL = 1.2 mA|0||0\.4|||
|Vhys Hysteresis voltage|||500||mV|||
|**POWER SUPPLY**||||||||
|Quiescent current|||350|450|μA|||
||Power-down mode||0\.5|2||||
|Power-on reset threshold|||2||V|||



1) RTI = Referred-to-input.
1) Input leakage is positive (current flows into the pin) for the conditions shown at the top of this table. Negative leakage currents can occur under different input conditions.
1) SMBus timeouts in the INA3221 reset the interface whenever SCL is low for more than 28 ms.![ref4]

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 7

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

6. **Typical<a name="_page6_x0.00_y72.00"></a> Characteristics**

at TA = 25°C, VS = 3.3 V, VIN+ = 12 V, VSHUNT = (VIN+) – (VIN–) = 0 mV, and VBUS = VIN– = 12 V (unless otherwise noted)![ref4]



|<p>0 ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.020.png)−10 −20 −30 −40 −50 −60 </p><p>1 10 100 1k 10k 100k</p><p>Frequency (Hz)</p><p>G001 </p><p>**Figure 1. Frequency Response**</p>|Population|||||||||||||||||||
| - | - | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- |
|||||||||||||||||||||
|||||||||||||||||||||
|||||||||||||||||||||
|||||||||||||||||||||
|<p>50 45 40 35 30![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.021.png)</p><p>−50 −25 0 25 50 75 100 125 150 Temperature (°C)</p><p>G004 </p><p>**Figure 3. Shunt Input Offset Voltage vs Temperature**</p>|<p>130 125 120 115![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.022.png)</p><p>−50 −25 0 25 50 75 100 125 150 Temperature (°C)</p><p>G005 </p><p>**Figure 4. Shunt Input Common-Mode Rejection Ratio vs Temperature**</p>|||||||||||||||||||
|Population|||<p>400 350 300 250 200 150![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.023.png)</p><p>100</p><p>50</p><p>0</p><p>−50 −25 0 25 50 75 100 125 150 Temperature (°C)</p><p>G007 </p><p>**Figure 6. Shunt Input Gain Error vs Temperature**</p>|||||||||||||||||
|||||||||||||||||||||
|||||||||||||||||||||
|||||||||||||||||||||
|||||||||||||||||||||
|||||0||||||||||||||||
**Typical Characteristics (continued)**

at TA = 25°C, VS = 3.3 V, VIN+ = 12 V, VSHUNT = (VIN+) – (VIN–) = 0 mV, and VBUS = VIN– = 12 V (unless otherwise noted)![ref4]

|<p>200 ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.024.png)150 100 50 </p><p>0 2 4 6 8 10 12 14 16 18 20 22 24 26 Common−Mode Input Voltage (V)</p><p>G008 </p><p>**Figure 7. Shunt Input Gain Error vs Common-Mode Voltage**</p>|Population||||||||||||||||||||||||||||
| -: | - | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- |
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
|<p>8![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.025.png)</p><p>4</p><p>0 −4 −8 −12 −16</p><p>−50 −25 0 25 50 75 100 125 150 Temperature (°C)</p><p>G010 </p><p>**Figure 9. Bus Input Offset Voltage vs Temperature**</p>|Population||0\.4||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
|<p>400 350 300 250 200</p><p>150 100 50</p><p>0</p>|||||||||G012 |50 45 40 35 30 25 20 15 10 5 0||||||||G013 |||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||IB−||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
|||||||||||||||IB+|||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 9

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

**Typical Characteristics (continued)**

at TA = 25°C, VS = 3.3 V, VIN+ = 12 V, VSHUNT = (VIN+) – (VIN–) = 0 mV, and VBUS = VIN– = 12 V (unless otherwise noted)![ref4]

|30 25 20 15 10 5 0|||||||||G014 |<p>450 400 350 300</p><p>250 200 150 100</p><p>50 0</p>|||||||||G015 ||||||||||||||||||||||||||||||||
| -: | :- | :- | :- | :- | :- | :- | :- | :- | - | - | :- | :- | :- | :- | :- | :- | :- | :- | - | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- |
||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||IB−|||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||IB+|||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
|||||||||||||||IB+, IB|−||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
|<p>500 450 400 350 300 250 200![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.026.png)</p><p>−50 −25 0 25 50 75 100 125 150 Temperature (°C)</p><p>G016 </p><p>**Figure 15. Active IQ vs Temperature**</p>|<p>3\.5 3 2.5 2 1.5 1 0.5![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.027.png)</p><p>0</p><p>−50 −25 0 25 50 75 100 125 150 Temperature (°C)</p><p>G017 </p><p>**Figure 16. Shutdown IQ vs Temperature**</p>||||||||||||||||||||||||||||||||||||||||||||||||||
|700 650 600 550 500 450 400 350 300||||||||||||||||||G018 |<p>350 300 250 200 150 100</p><p>50</p>||||||||||||||||||G019 ||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
||||||||||||||||||||||||||||||||||||||||||||||||||||
<a name="_page9_x0.00_y72.00"></a>**8 Detailed Description**

1. **Overview**

<a name="_page9_x0.00_y99.00"></a>The INA3221 is a current-shunt and bus voltage monitor that communicates over an I2C- and SMBus-compatible interface. The INA3221 provides digital shunt and bus voltage readings necessary for accurate decision making in precisely-controlled systems, and also monitors multiple rails to maintain compliance voltages. Programmable registers offer flexible configuration for measurement precision, and continuous versus single-shot operation. The [*Register Maps*](#_page23_x0.00_y72.00) section provides details of the INA3221 registers, beginning with [Table 3](#_page23_x0.00_y172.90).

2. **Functional<a name="_page9_x0.00_y182.80"></a> Block Diagram**

Bus Voltage (1) X![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.028.png)

Shunt Voltage  Power Valid Channel Channel 2 Upper Limit  (2)

Channel 3

ADC

Bus Voltage 

Channel Power Valid 

Lower Limit(2)

Shunt Voltage (1) X

Critical Limit(2) Warning Limit (2)

Channel 2 Summation (1) Channel 3

Summation Limit (2)

1) Read-only.
1) Read/write.![ref4]

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 11

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

3. **Feature<a name="_page10_x0.00_y72.00"></a> Description**
1. **Basic ADC Functions**

The INA3221 performs two measurements on up to three power supplies of interest. The voltage developed from the load current passing through a shunt resistor creates a shunt voltage that is measured between the IN+ and IN– pins. The device also internally measures the power-supply bus voltage at the IN– pin for each channel. The differential shunt voltage is measured with respect to the IN– pin, and the bus voltage is measured with respect to ground.

The INA3221 is typically powered by a separate power supply that ranges from 2.7 V to 5.5 V. The monitored supply buses range from 0 V to 26 V.

**CAUTION![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.029.png)**

Based on the fixed 8-mV bus-voltage register LSB (for any channel), a full-scale register value results in 32.76 V. However, the actual voltage applied to the INA3221 input pins must not exceed 26 V.

There are no special power-supply sequencing considerations between the common-mode input ranges and the device power-supply voltage because they are independent of each other; therefore, the bus voltages can be present with the supply voltage off and vice versa.

The INA3221 takes two measurements for each channel: one for shunt voltage and one for bus voltage. Each measurement can be independently or sequentially measured, based on the mode setting (bits 2-0 in the Configuration register). When the INA3221 is in normal operating mode (that is, the MODE bits of the Configuration register are set to 111), the device continuously converts a shunt-voltage reading followed by a bus-voltage reading. This procedure converts one channel, and then continues to the shunt voltage reading of the next enabled channel, followed by the bus-voltage reading for that channel, and so on, until all enabled channels have been measured. The programmed Configuration register mode setting applies to all channels. Any channels that are not enabled are bypassed in the measurement sequence, regardless of mode setting.

The INA3221 has two operating modes, continuous and single-shot, that determine the internal ADC operation after these conversions complete. When the INA3221 is set to continuous mode (using the MODE bit settings), the device continues to cycle through all enabled channels until a new configuration setting is programmed.

The Configuration register MODE control bits also enable modes to be selected that convert only the shunt or bus voltage. This feature further allows the device to fit specific application requirements.

In single-shot (triggered) mode, setting any single-shot convert mode to the Configuration register (that is, the Configuration register MODE bits set to 001, 010, or 011) triggers a single-shot conversion. This action produces a single set of measurements for all enabled channels. To trigger another single-shot conversion, write to the Configuration register a second time, even if the mode does not change. When a single-shot conversion is initiated, all enabled channels are measured one time and then the device enters a power-down state. The INA3221 registers can be read at any time, even while in power-down. The data present in these registers are from the last completed conversion results for the corresponding register. The conversion ready flag bit (Mask/Enable register, CVRF bit) helps coordinate single-shot conversions, and is especially helpful during longer conversion time settings. The CVRF bit is set after all conversions are complete. The CVRF bit clears under the following conditions:

1. Writing to the Configuration register, except when configuring the MODE bits for power-down mode; or
1. Reading<a name="_page10_x0.00_y616.10"></a> the Mask/Enable register.

In addition to the two operating modes (continuous and single-shot), the INA3221 also has a separate selectable power-down mode that reduces the quiescent current and turns off current into the INA3221 inputs. Power-down mode reduces the impact of supply drain when the device is not used. Full recovery from power-down mode requires 40 µs. The INA3221 registers can be written to and read from while the device is in power-down mode. The device remains in power-down mode until one of the active MODE settings are written to the Configuration register.![ref4]

**Feature Description (continued)**

2. **Alert Monitoring**

The INA3221 allows programmable thresholds that make sure the intended application operates within the desired operating conditions. Multiple monitoring functions are available using four alert pins: Critical, Warning, PV (power valid), and TC (timing control). These alert pins are open-drain connections.

1. ***Critical<a name="_page11_x0.00_y151.80"></a> Alert***

The critical-alert feature monitors functions based on individual conversions of each shunt-voltage channel. The critical-alert limit feature compares the shunt-voltage conversion for each shunt-voltage channel to the value programmed into the corresponding limit register, in order to determine if the measured value exceeds the intended limit. Exceeding the programmed limit indicates that the current through the shunt resistor is too high.

At power-up, the default critical-alert limit value for each channel is set to the positive full-scale value, effectively disabling the alert. Program the corresponding limit registers at any time to begin monitoring for out-of-range conditions. The Critical alert pin pulls low if any channel measurement exceeds the limit present in the corresponding-channel critical-alert limit register. When the Critical alert pulls low, read the Mask/Enable register to determine which channel caused the critical alert flag indicator bit (CF1-3) to assert (= 1).

<a name="_page11_x0.00_y284.50"></a>**8.3.2.1.1 Summation Control Function**

The INA3221 also allows the Critical alert pin to be controlled by the summation control function. This function adds the single shunt-voltage conversions for the desired channels (set by SCC1-3 in the Mask/Enable register) in order to compare the combined sum to the programmed limit.

The SCC bits either disable the summation control function or allow the summation control function to switch between including two or three channels in the Shunt-Voltage Sum register. The Shunt-Voltage Sum Limit register contains the programmed value that is compared to the value in the Shunt-Voltage Sum register in order to determine if the total summed limit is exceeded. If the shunt-voltage sum limit value is exceeded, the Critical alert pin pulls low. Either the summation alert flag indicator bit (SF) or the individual critical alert limit bits (CF1-3) in the Mask/Enable register determine the source of the alert when the Critical alert pin pulls low.

For the summation limit to have a meaningful value, use the same shunt-resistor value on all included channels. Unless equal shunt-resistor values are used for each channel, do not use this function to add the individual conversion values directly together in the Shunt-Voltage Sum register to report the total current.

2. ***Warning Alert***

The warning alert monitors the averaged value of each shunt-voltage channel. The averaged value of each shunt-voltage channel is based on the number of averages set with the averaging mode bits (AVG1-3) in the Configuration register. The average value updates in the shunt-voltage output register each time there is a conversion on the corresponding channel. The device compares the averaged value to the value programmed in the corresponding-channel Warning Alert Limit register to determine if the averaged value has been exceeded, indicating whether the average current is too high. At power-up, the default warning-alert limit value for each channel is set to the positive full-scale value, effectively disabling the alert. The corresponding limit registers can be programmed at any time to begin monitoring for out-of-range conditions. The Warning alert pin pulls low if any channel measurements exceed the limit present in the corresponding-channel Warning Alert Limit register. When the Warning alert pin pulls low, read the Mask/Enable register in order to determine which channel warning alert flag indicator bit (WF1-3) is asserted (= 1).![ref4]

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 15

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

**Feature Description (continued)**

3. ***Power-Valid Alert***

The power-valid alert verifies if all power rails are above the required levels. This feature manages power sequencing, and validates the reported measurements based on system configuration. Power-valid mode starts at power-up, and detects when each channel exceeds a 10-V threshold. This 10-V level is the default value programmed into the Power-Valid Upper-Limit register. This value can be reprogrammed when the INA3221 is powered up to a valid supply-voltage level of at least 2.7 V. When all three bus-voltage measurements reach the programmed value loaded to the Power-Valid Upper-Limit register, the power-valid (PV) alert pin pulls high. PV powers up in a low state, and does not pull high until the power-valid conditions are met, indicating all bus- voltage rails are above the power-valid upper-limit value. This sequence is shown in [Figure 19](#_page12_x0.00_y284.40).

All enabled channel bus voltages are  All enabled channel bus voltages are above the power-valid upper limit. above the power-valid upper limit.

High ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.030.png)Power  

Valid 

Output 

Low 

All enabled channel bus voltages are  At least one bus voltage channel has not above the power-valid upper limit. dropped below the power-valid lower limit.

<a name="_page12_x0.00_y284.40"></a><a name="_page12_x0.00_y205.90"></a>**Figure 19. Power-Valid State Diagram**

When the power-valid conditions are met, and the PV pin pulls high, the INA3221 monitors if any bus-voltage measurements drop below 9 V. This 9-V level is the default value programmed into the Power-Valid Lower-Limit register. This value can also be reprogrammed when the INA3221 powers up to a supply voltage of at least 2.7 V. If any bus-voltage measurement on the three channels drops below the Power-Valid Lower-Limit register value, the PV pin goes low, indicating that the power-valid condition is no longer met. At this point, the INA3221 resumes monitoring the power rails for a power-valid condition set in the Power-Valid Upper-Limit register.

The power-valid alert function is based on the power-valid conditions requirement that all three channels reach the intended Power-Valid Upper-Limit register value. If all three channels are not used, connect the unused- channel IN– pin externally to one of the used channels in order to use the power-valid alert function. If the unused channel is not connected to a valid rail, the power-valid alert function cannot detect if all three channels reach the power-valid level. Float the unused channel IN+ pin.

The power-valid function also requires that bus-voltage measurements are monitored. To detect changes in the power-valid state, enable bus-voltage measurements through one of the corresponding MODE-bit settings in the Configuration register. The single-shot bus-voltage mode periodically cycles between the bus-voltage measurements to make sure that the power-valid conditions are met.

When all three bus-voltage measurements are completed, the device compares the results to the power-valid threshold values to determine the power-valid state. The bus-voltage measurement values remain in the corresponding channel output registers until the bus-voltage measurements are taken again, thus updating the output registers. When the output registers are updated, the values are again compared to the power-valid thresholds. Without taking periodic bus-voltage measurements, the INA3221 is unable to determine if the power- valid conditions are maintained.![ref4]

**Feature Description (continued)**

The PV pin allows for a 0-V output that indicates a power-invalid condition. An output equal to the pull-up supply voltage connected to the VPU pin indicates a power-valid condition, as shown in [Figure 20](#_page13_x0.00_y295.10). It is also possible to divide down the high power-valid pull-up voltage by adding a resistor to ground at the PV output, thus allowing this function to interface with lower-voltage circuitry, if needed.

VS

**INA3321 ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.031.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.032.png)**

VPU 

RPU\_ext

PV

RPU

Power-Valid  RDIV(1)

Detection

<a name="_page13_x0.00_y146.00"></a>(1) RDIV can be used to level-shift the PV output high.

<a name="_page13_x0.00_y295.10"></a>**Figure 20. Power-Valid Output Structure**

4. ***Timing-Control Alert***

The INA3221 timing-control alert function helps verify proper power-supply sequencing. At power-up, the default INA3221 setting is continuous shunt- and bus-voltage conversion mode, and the INA3221 internally begins comparing the channel-1 bus voltage to determine when a 1.2-V level is reached. This comparison is made each time the sequence returns to the channel-1 bus-voltage measurement. When a 1.2-V level is detected on the channel-1 bus-voltage measurement, the INA3221 begins checking for a 1.2-V level present on the channel-2 bus-voltage measurement. After a 1.2-V level is detected on channel 1, if the INA3221 does not detect a 1.2-V value or greater on the bus voltage measurement following four complete cycles of all three channels, the timing control (TC) alert pin pulls low to indicate that the INA3221 has not detected a valid power rail on channel 2. As shown in [Figure 21](#_page13_x0.00_y576.30), this sequence allows for approximately 28.6 ms from the time 1.2 V is detected on channel 1 for a valid voltage to be detected on channel 2. [Figure 22](#_page13_x0.00_y693.80) illustrates the state diagram for the TC alert pin.

1\.2 V Detected on Channel-1  Measure For 1.2 V on Bus-Voltage Measurement Channel-2 Bus Voltage

![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.033.png) ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.034.png)

Signal SB SB SB SB SB SB SB SB SB SB SB SB SB SB SB Channel Ch  Ch  Ch  Ch  Ch  Ch  Ch  Ch  Ch  Ch  Ch  Ch  Ch  Ch  Ch 

1  2 3 1 2 3 1 2 3 1 2 3 1 2 3

   2. ms![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.035.png)

28\.6 ms

NOTE: The signal refers to the corresponding shunt (S) and bus (B) voltage measurement for each channel.

<a name="_page13_x0.00_y576.30"></a>**Figure 21. Timing Control Timing Diagram**

1\.2 V Detected on Channel-1  Measure for 1.2 V

Bus-Voltage Measurement on Channel-2 Bus Voltage

![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.036.png) ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.037.png) 1.2 V on Channel 2 Detected High ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.038.png)

Timing  

Control  

Output 28.6 ms

1\.2 V on Channel 2 Not Detected

Low

<a name="_page13_x0.00_y693.80"></a>**Figure 22. Timing Control State Diagram![ref4]**

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 17

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

**Feature Description (continued)**

The timing control alert function is only monitored at power-up or when a software reset is issued by setting the reset bit (RST, bit 15) in the Configuration register. The timing control alert function timing is based on the default device settings at power-up. Writing to the Configuration register before the timing control alert function completes the full sequence results in disabling the timing control alert until power is cycled or a software reset is issued.

5. ***Default Settings***

The default register power-up states are listed in the *[*Register Maps*](#_page23_x0.00_y72.00)* section. These registers are volatile; if programmed to a value other than the default values shown in [Table 3](#_page23_x0.00_y172.90), the registers must be reprogrammed every time the device powers up.

3. **Software Reset**

The INA3321 features a software reset that reinitializes the device and register settings to default power-up values without having to cycle power to the device. Use bit 15 (RST) of the Configuration register to perform a software reset. Setting RST reinitializes all registers and settings to the default power state with the exception of the power-valid output state.

If a software reset is issued, the INA3221 holds the output of the PV pin until the power-valid detection sequence completes. The Power-Valid Upper Limit and Power-Valid Lower limit registers return to the default state when the software reset has been issued. Therefore, any reprogrammed limit registers are reset, resulting in the original power-valid thresholds validating the power-valid conditions. This architecture prevents interruption to circuitry connected to the power valid output during a software reset event.![ref4]

4. **Device<a name="_page15_x0.00_y72.00"></a> Functional Modes**
1. **Averaging Function**

The INA3221 includes three channels to monitor up to three independent supply buses; however, multichannel monitoring sometimes results in poor shunt-resistor placement. Ideally, shunt resistors are placed as close as possible to the corresponding channel input pins. However, because of system layout and multiple power-supply rails, one or more shunt resistors may have to be located further away, thus presenting potentially larger measurement errors. These errors result from additional trace inductance and other parasitic impedances between the shunt resistor and input pins. Longer traces also create an additional potential for coupling noise into the signal if they are routed near noise-generating sections of the board.

The INA3221 averaging function mitigates this potential problem by limiting the impact that any single measurement has on the averaged value of each measured signal. This limitation reduces the influence that noise has on the averaged value, thereby effectively creating an input-signal filter.

The averaging function is illustrated in [Figure 23](#_page15_x0.00_y410.10). Operation begins by first measuring the shunt input signal on channel 1. This value is then subtracted from the previous value that was present in the corresponding data output register. This difference is then divided by the value programmed by the averaging mode setting (AVG2-0, Configuration register bits 11-9) and stored in an internal accumulation register. The computed result is then added to the previously-loaded data output register value, and the resulting value is loaded to the corresponding data output register. After the update, the next signal to be measured follows the same process. The larger the value selected for the averaging mode setting, the less impact or influence any new conversion has on the average value, as shown in [Figure 24](#_page15_x0.00_y595.60). This averaging feature functions as a filter to reduce input noise from the averaged measurement value.

\+ ÷  + Output ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.039.png)

SampNelwe   AVG #  Register

± +

<a name="_page15_x0.00_y410.10"></a>**Figure 23. Averaging Function Block Diagram**

26 25 24 23![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.040.png) ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.041.png)

||||||1 Ave 16 Av|rage erages|||
| :- | :- | :- | :- | :- | :- | :- | :- | :- |
||||||||||
||||||1024 |Averages|||
||||||||||
||||||||||
||||||||||
||||||||||
||||||||||
||||||||||
22 21 20

1000 2000 3000 4000 5000 6000 7000

Samples G020 

<a name="_page15_x0.00_y595.60"></a>**Figure 24. Average Setting Example![ref4]**

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 19

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

**Device Functional Modes (continued)**

2. **Multiple Channel Monitoring**

<a name="_page16_x0.00_y107.90"></a>The INA3221 monitors shunt and voltage measurements for up to three unique power-supply rails, and measures up to six different signals. Adjust the number of channels and signals being measured by setting the channel enable (CH1en to CH3en) and mode (MODE3-1) bits in the Configuration register. This adjustment allows the device to be optimized based on application requirements for the system in use.

1. ***Channel Configuration***

If all three channels must be monitored at power-up, but only one channel must be monitored after the system has stabilized, disable the other two channels after power-up. This configuration allows the INA3221 to only monitor the power-supply rail of interest. Disable unused channels to help improve system response time by more quickly returning to sampling the channel of interest. The INA3221 linearly monitors the enabled channels. That is, if all three channels are enabled for both shunt- and bus-voltage measurements, an additional five conversions complete after a signal is measured before the device returns to that particular signal to begin another conversion. To reduce this requirement down to two conversions before the device begins a new conversion on a particular channel again, change the operating mode to monitor only the shunt voltage.

A timing aspect is also involved in reducing the measured signals. The amount of time to complete an all- channel, shunt- and bus-voltage sequence is equal to the sum of the shunt-voltage conversion time and the bus- voltage conversion time (programmed by the CT bits in the Configuration register) multiplied by the three channels. The conversion times for the shunt- and bus-voltage measurements are programmed independently; however, the selected shunt- and bus-voltage conversion times apply to all channels.

Enable a single channel with only one signal measured to allow for that particular signal to be monitored solely. This setting enables the fastest response over time to changes in that specific input signal because there is no delay from the end of one conversion before the next conversion begins on that channel. Conversion time is not affected by enabling or disabling other channels. Selecting both the shunt- and bus-voltage settings, as well as enabling additional channels, extends the time from the end of one conversion on a signal before the beginning of the next conversion of that signal.![ref4]

**Device Functional Modes (continued)**

2. ***Averaging and Conversion-Time Considerations***

The INA3221 has programmable conversion times for both the shunt- and bus-voltage measurements. The selectable conversion times for these measurements range from 140 μs to 8.244 ms. The conversion-time settings, along with the programmable-averaging mode, enable the INA3221 to optimize available timing requirements in a given application. For example, if a system requires data to be read every 2 ms with all three channels monitored, configure the INA3221 with the conversion times for the shunt- and bus-voltage measurements set to 332 μs.

The INA3221 can also be configured with a different conversion-time setting for the shunt- and bus-voltage measurements. This approach is common in applications where the bus voltage tends to be relatively stable, and allows for the time focused on the bus voltage measurement to be reduced relative to the shunt-voltage measurement. For example, the shunt-voltage conversion time can be set to 4.156 ms with the bus-voltage conversion time set to 588 μs for a 5-ms update time.

There are trade-offs associated with the conversion-time and averaging-mode settings. The averaging feature significantly improves the measurement accuracy by effectively filtering the signal. This approach allows the INA3221 to reduce the amount of noise in the measurement caused by noise coupling into the signal. A greater number of averages allows the INA3221 to be more effective in reducing the measurement noise component. The trade-off to this noise reduction is that the averaged value has a longer response time to input-signal changes. This aspect of the averaging feature is mitigated to some extent with the critical-alert feature that compares each single conversion to determine if a measured signal (with noise component) has exceeded the maximum acceptable level.

The selected conversion times also have an impact on measurement accuracy. This effect can seen in [Figure 25](#_page17_x0.00_y557.10). The multiple conversion times shown in [Figure 25](#_page17_x0.00_y557.10) illustrate the impact of noise on measurement. These curves shown do not use averaging. In order to achieve the highest-accuracy measurement possible, use a combination of the longest allowable conversion times and highest number of averages, based on system timing requirements.

120 80 40

|||Convers|ion Time: 14|0 µs|
| :- | :- | - | - | - |
||||||
|||Convers|ion Time: 33|2 µs|
||||||
||||||
|||Convers|ion Time: 1.1|` `ms|
||||||
||||||
0 í 40 í 80 í 120

0 200 400 600 800 1000

Number of Conversions

<a name="_page17_x0.00_y557.10"></a><a name="_page17_x0.00_y399.60"></a>**Figure 25. Noise Versus Conversion Time![ref4]**

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 21

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

**Device Functional Modes (continued)**

3. **Filtering and Input Considerations**

Measuring current is often noisy, and such noise can be difficult to define. The INA3221 offers several filtering options by allowing conversion times and the number of averages to be selected independently in the Configuration register. The conversion times can be set independently for the shunt- and bus-voltage measurements as well, for added flexibility in configuring power-supply bus monitoring.

The internal ADC is based on a delta-sigma (ΔΣ) front-end with a 500-kHz (±30%) typical sampling rate. This architecture has good inherent noise rejection; however, transients that occur at or very close to the sampling- rate harmonics can cause problems. These transient signals are at 1 MHz and higher; therefore, the signals are managed by incorporating filtering at the INA3221 input. High-frequency signals allow for the use of low-value series resistors on the filter, with negligible effects on measurement accuracy. In general, filtering the INA3221 input is only necessary if there are transients at exact harmonics of the 500-kHz (±30%) sampling rate that are greater than 1 MHz. Filter using the lowest-possible series resistance (typically 10 Ω or less) and a ceramic capacitor. Recommended capacitor values are 0.1 μF to 1.0 μF. [Figure 26](#_page18_x0.00_y452.30) shows the INA3221 with an additional filter added at the input.

Power Supply (0 V to 26 V)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.042.png)

RFILTER Ch 1

- 10 

VIN+2 Ch 2

CFILTER VIN2

ADC

RFILTER

- 10 

Load 2 Ch 3

CFILTER:  0.1-F to 1- F

Ceramic Capacitor

<a name="_page18_x0.00_y452.30"></a>**Figure 26. INA3221 With Input Filtering**

The INA3221 inputs are specified to tolerate 26 V across the inputs. However, overload conditions are another consideration for the INA3221 inputs. For example, a large differential-input scenario might be a short to ground on the load side of the shunt. This type of event results in the full power-supply voltage applied across the shunt, if supported by the power supply or energy-storage capacitors. Keep in mind that removing a short to ground may result in inductive kickbacks that can exceed the 26-V differential and common-mode rating of the INA3221. Inductive kickback voltages are best controlled by zener-type transient-absorbing devices (commonly called *transzorbs*) combined with sufficient energy-storage capacitance.

In applications that do not have large energy-storage electrolytic capacitors on one or both sides of the shunt, an input overstress condition can result from an excessive dV/dt of the voltage applied to the input. A hard physical short is the most likely cause of this event, particularly in applications without large electrolytic capacitors present. This problem occurs because an excessive dV/dt can activate the INA3221 ESD protection in systems where large currents are available. Testing has demonstrated that the addition of 10-Ω resistors in series with each INA3221 input sufficiently protects the inputs against this dV/dt failure up to the 26-V device rating. Selecting these resistors in the range noted has minimal effect on accuracy.![ref4]

5. **Programming**
1. <a name="_page19_x0.00_y72.00"></a>**Bus Overview**

The INA3221 offers compatibility with both I2C and SMBus interfaces. The I2C and SMBus protocols are essentially compatible with one another.

<a name="_page19_x0.00_y138.70"></a>The I2C interface is used throughout this data sheet as the primary example, with the SMBus protocol specified only when a difference between the two systems is discussed. Two I/O lines, the serial clock (SCL) and data signal line (SDA), connect the INA3221 to the bus. Both SCL and SDA are open-drain connections.

The device that initiates a data transfer is called a *master*, and the devices controlled by the master are *slaves*. The bus must be controlled by the master device that generates the SCL, controls the bus access, and generates start and stop conditions.

To address a specific device, the master initiates a start condition by pulling SDA from a high to a low logic level while SCL is high. All slaves on the bus shift in the slave address byte on the SCL rising edge, with the last bit indicating whether a read or write operation is intended. During the ninth clock pulse, the slave being addressed responds to the master by generating an *acknowledge* bit and pulling SDA low.

Data transfer is then initiated and eight bits of data are sent, followed by an acknowledge bit. During data transfer, SDA must remain stable while SCL is high. Any change in SDA while SCL is high is interpreted as a start or stop condition.

After all data are transferred, the master generates a stop condition by pulling SDA from low to high while SCL is high. The INA3221 includes a 28-ms timeout on the interface to prevent locking up the bus.

1. ***Serial Bus Address***

To communicate with the INA3221, the master must first address slave devices with a slave address byte. This byte consists of seven address bits and a direction bit to indicate whether the intended action is a read or write operation.

<a name="_page19_x0.00_y395.00"></a>The INA3221 has one address pin, A0. [Table 1](#_page19_x0.00_y454.90) describes the pin logic levels for each of the four possible addresses. The state of the A0 pin is sampled on every bus communication and must be set before any activity on the interface occurs.

<a name="_page19_x0.00_y438.90"></a>**Table 1. Address Pins and Slave Addresses**



|<a name="_page19_x0.00_y454.90"></a>**A0**|**SLAVE ADDRESS**|
| - | - |
|GND|1000000|
|VS|1000001|
|SDA|1000010|
|SCL|1000011|

2. ***Serial Interface***

The INA3221 only operates as a slave device on the I2C bus and SMBus. Bus connections are made using the open-drain I/O lines, SDA and SCL. The SDA and SCL pins feature integrated spike-suppression filters and Schmitt triggers to minimize the effects of input spikes and bus noise. While there is spike suppression integrated into the digital I/O lines, use proper layout to minimize the amount of coupling into the communication lines. Noise introduction occurs from capacitively coupling signal edges between the two communication lines themselves, or from other switching noise sources present in the system. Routing traces in parallel with ground between layers on a printed circuit board (PCB) typically reduces the effects of coupling between the communication lines. Shield communication lines to reduce the possibility of unintended noise coupling into the digital I/O lines that could be incorrectly interpreted as start or stop commands.

The INA3221 supports a transmission protocol for Fast (1 kHz to 400 kHz) and High-speed (1 kHz to 2.44 MHz) modes. All data bytes are transmitted MSB first.![ref4]

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 23

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

2. **Writing To and Reading From the INA3221**

To access a specific INA3221 register, write the appropriate value to the register pointer. See [Table 3](#_page23_x0.00_y172.90) for a complete list of registers and corresponding addresses. The value for the register pointer, as shown in [Figure 27](#_page20_x0.00_y293.40), is![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.043.png) the first byte transferred after the slave address byte with the R/W bit low. Every write operation to the INA3221 requires a register pointer value.

1 9 1 9

SCL ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.044.png)

SDA 1 0 0 0 0 0 A0 R/W D7 D6 D5 D4 D3 D2 D1 D0

Start By  ACK By  ACK By  Stop By Master Device Device Master

Frame 1: Two-Wire Slave Address Byte (1) Frame 2: Register Pointer Byte![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.045.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.046.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.047.png)

<a name="_page20_x0.00_y142.90"></a>(1) The value of the Slave Address Byte is determined by the A0 pin setting; see [Table 1](#_page19_x0.00_y454.90).

<a name="_page20_x0.00_y293.40"></a>**Figure 27. Typical Register Pointer Set**

Register writes begin with the first byte transmitted by the master. This byte is the slave address, with the R/W ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.048.png)bit low. The INA3221 then acknowledges receipt of a valid address. The next byte transmitted by the master is the register address that data are written to. This register address value updates the register pointer to the desired register. The next two bytes are written to the register addressed by the register pointer. The INA3221 acknowledges receipt of each data byte. The master terminates data transfer by generating a start or stop condition.

When reading from the INA3221, the last value stored in the register pointer by a write operation determines which register is read during a read operation. To change the register pointer for a read operation, write a new value![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.049.png) to the register pointer. This write is accomplished by issuing a slave address byte with the R/W bit low, followed by the register pointer byte. No additional data are required. The master then generates a start condition and sends the slave address byte with the R/W bit high to initiate the read command. The next byte is transmitted by the slave and is the most significant byte of the register indicated by the register pointer. This byte is followed by an acknowledge from the master; then the slave transmits the least significant byte. The master acknowledges receipt of the data byte. The master terminates data transfer by generating a *not-acknowledge* after receiving any data byte, or generating a start or stop condition. If repeated reads from the same register are desired, it is not necessary to continually send the register pointer bytes; the INA3221 retains the register pointer value until it is changed by the next write operation.

[Figure 28](#_page20_x0.00_y683.40) and [Figure 29](#_page21_x0.00_y251.60) show the write and read operation timing diagrams, respectively. Note that register bytes are sent most-significant byte first, followed by the least significant byte.

1 9 1 9 1 9

SCL ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.050.png)

SDA 1 0 0 0 0 0 A0 R/W D15 D14 D13 D12 D11 D10 D9 D8 D7 D6 D5 D4 D3 D2 D1 D0

Start By  ACK By  ACK By  ACK By  Stop By Master Device Device Device Master

Frame 1: Two-Wire Slave Address Byte  (1) Frame 2: Data MSByte Frame 3: Data LSByte![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.051.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.052.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.053.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.054.png)

<a name="_page20_x0.00_y550.10"></a>(1) The value of the slave address byte is determined by the A0 pin setting; see [Table 1](#_page19_x0.00_y454.90).

<a name="_page20_x0.00_y683.40"></a>**Figure 28. Timing Diagram for Write Word Format![ref4]**

1 9 1 9 1 9

SCL ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.055.png)

SDA 1 0 0 0 0 0 A0 R/W D15 D14 D13 D12 D11 D10 D9 D8 D7 D6 D5 D4 D3 D2 D1 D0

Start By  ACK By  From  ACK By  From  No ACK By  Stop By Master Device Device Master Device Master (3) Master

Frame 1: Two-Wire Slave Address Byte (1) Frame 2: Data MSByte (2) Frame 3: Data LSByte (2)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.056.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.057.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.058.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.059.png)

1) The<a name="_page21_x0.00_y83.00"></a> value of the slave address byte is determined by the A0 pin setting; see [Table 1](#_page19_x0.00_y454.90).
1) Read data are from the last register pointer location. If a new register is desired, the register pointer must be updated. See [Figure 27](#_page20_x0.00_y293.40).
1) The master can also send an ACK.

<a name="_page21_x0.00_y251.60"></a>**Figure 29. Timing Diagram for Read Word Format [Figure 30](#_page21_x0.00_y449.00)** shows the timing diagram for the SMBus Alert response operation.

1 9 1 9

SCL ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.060.png)

SDA 0 0 0 1 1 0 0 R/W 1 0 0 0 0 0 A0 0

Start By  ACK By  From  No ACK By  Stop By Master Device Device Master Master

Frame 1: SMBus ALERT Response Address Byte Frame 2: Slave Address Byte (1)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.061.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.062.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.063.png)

<a name="_page21_x0.00_y298.50"></a>(1) The value of the Slave Address Byte is determined by the A0 pin setting; see [Table 1](#_page19_x0.00_y454.90).

<a name="_page21_x0.00_y449.00"></a>**Figure 30. Timing Diagram for SMBus Alert**

***8.5.2.1 High-Speed I**2**C Mode***

When the bus is idle, the SDA and SCL lines are pulled high by the pull-up resistors. The master generates a start condition followed by a valid serial byte with the high-speed (Hs) master code *00001XXX*. This transmission is made in fast (400 kHz) or standard (100 kHz) (F/S) mode at no more than 400 kHz. The INA3221 does not acknowledge the Hs master code, but does recognize it and switches its internal filters to support 2.44-MHz operation.

The master then generates a repeated start condition (a repeated start condition has the same timing as the start condition). After this repeated start condition, the protocol is the same as F/S mode, except that transmission speeds up to 2.44 MHz are allowed. Instead of using a stop condition, the master uses a repeated start conditions to secure the bus in Hs mode. A stop condition ends the Hs mode, and switches all internal INA3221 filters to support F/S mode.

[Figure 31](#_page22_x0.00_y204.50) shows the bus timing, and [Table 2](#_page22_x0.00_y251.40) lists the bus timing definitions.![ref4]

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 25

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

t(LOW)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.064.png)

tr tfCL

SCL

t(HDSTA) t t(SUSTA) t

t(HDDAT) (HIGH) t(HDSTA) (SUSTO) t(VDDAT) t(SUDAT) tfDA

SDA

t(BUF)

P S S P

<a name="_page22_x0.00_y204.50"></a><a name="_page22_x0.00_y83.00"></a>**Figure 31. Bus Timing\
<a name="_page22_x0.00_y234.40"></a>Table 2. Bus Timing Definitions(1)**



|||<a name="_page22_x0.00_y251.40"></a>**FAST MODE**||**HIGH-SPEED MODE**||
| :- | :- | - | :- | - | :- |
||**PARAMETER**|**MIN**|**MAX**|**MIN MAX**|**UNIT**|
|f(SCL)|SCL operating frequency|0\.001|0\.4|0\.001 2.44|MHz|
|t(BUF)|Bus free time between stop and start conditions|1300||160|ns|
|t(HDSTA)|Hold time after repeated START condition. After this period, the first clock is generated.|600||160|ns|
|t(SUSTA)|Repeated start condition setup time|600||160|ns|
|t(SUSTO)|STOP condition setup time|600||160|ns|
|t(HDDAT)|Data hold time|0||0|ns|
|t(VDDAT)|Data valid time||1200|260|ns|
|t(SUDAT)|Data setup time|100||10|ns|
|t(LOW)|SCL clock low period|1300||270|ns|
|t(HIGH)|SCL clock high period|600||60|ns|
|tfDA|Data fall time||500|150|ns|
|tfCL|Clock fall time||300|40|ns|
|tr|Clock rise time||300|40|ns|
||Clock rise time for SCLK ≤ 100 kHz||1000||ns|

(1) Values based on a statistical analysis of a one-time sample of devices. Minimum and maximum values are not production tested.

A0 = A1 = 0.

3. **SMBus Alert Response**

The INA3221 responds to the SMBus alert response address. The SMBus alert response provides a quick fault identification for simple slave devices. When an alert occurs, the master broadcasts the alert response slave address![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.065.png) (0001 100) with the R/W bit set high. Following this alert response, any slave devices that generated an alert identify themselves by acknowledging the alert response, and sending their respective address on the bus.

The alert response can activate several different slave devices simultaneously, similar to the I2C general call. If more than one slave attempts to respond, bus arbitration rules apply. The losing device does not generate an acknowledge, and continues to hold the alert line low until the interrupt is cleared.![ref4]

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 27

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

SBOS576B–MAY 2012–REVISED MARCH 2016 **[**www.ti.com**](http://www.ti.com)![ref3]**

6. **Register<a name="_page23_x0.00_y72.00"></a> Maps**

The INA3221 uses a bank of registers for holding configuration settings, measurement results, minimum and maximum limits, and status information. [Table 3](#_page23_x0.00_y172.90) summarizes the INA3221 registers; see the *[*Functional Block Diagram*](#_page9_x0.00_y182.80)* section for an illustration of the registers.

1. **Summary of Register Set**

**Table 3. Summary of Register Set**



|<a name="_page23_x0.00_y172.90"></a>**POINTER ADDRESS (Hex)**|**REGISTER NAME**|**DESCRIPTION**|**POWER-ON RES**|**ET**|**TYPE(1)**|
| :-: | - | - | - | - | - |
||||**BINARY**|**HEX**||
|0|Configuration|All-register reset, shunt and bus voltage ADC conversion times and averaging, operating mode.|01110001 00100111|7127|R/W![ref5]|
|1|Channel-1 Shunt Voltage|Averaged shunt voltage value.|00000000 00000000|0000|R|
|2|Channel-1 Bus Voltage|Averaged bus voltage value.|00000000 00000000|0000|R|
|3|Channel-2 Shunt Voltage|Averaged shunt voltage value.|00000000 00000000|0000|R|
|4|Channel-2 Bus Voltage|Averaged bus voltage value.|00000000 00000000|0000|R|
|5|Channel-3 Shunt Voltage|Averaged shunt voltage value.|00000000 00000000|0000|R|
|6|Channel-3 Bus Voltage|Averaged bus voltage value.|00000000 00000000|0000|R|
|7|Channel-1 Critical Alert Limit|Contains limit value to compare each conversion value to determine if the corresponding limit has been exceeded.|01111111 11111000|7FF8|R/W![ref6]|
|8|Channel-1 Warning Alert Limit|Contains limit value to compare to averaged measurement to determine if the corresponding limit has been exceeded.|01111111 11111000|7FF8|R/W![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.068.png)|
|9|Channel-2 Critical Alert Limit|Contains limit value to compare each conversion value to determine if the corresponding limit has been exceeded.|01111111 11111000|7FF8|R/W![ref7]|
|A|Channel-2 Warning Alert Limit|Contains limit value to compare to averaged measurement to determine if the corresponding limit has been exceeded.|01111111 11111000|7FF8|R/W![ref5]|
|B|Channel-3 Critical Alert Limit|Contains limit value to compare each conversion value to determine if the corresponding limit has been exceeded.|01111111 11111000|7FF8|R/W![ref8]|
|C|Channel-3 Warning Alert Limit|Contains limit value to compare to averaged measurement to determine if the corresponding limit has been exceeded.|01111111 11111000|7FF8|R/W![ref6]|
|D|Shunt-Voltage Sum|Contains the summed value of the each of the selected shunt voltage conversions.|00000000 00000000|0000|R|
|E|Shunt-Voltage Sum Limit|Contains limit value to compare to the Shunt Voltage Sum register to determine if the corresponding limit has been exceeded.|01111111 11111110|7FFE|R/W![ref7]|
|F|Mask/Enable|Alert configuration, alert status indication, summation control and status.|00000000 00000010|0002|R/W![ref5]|
|10|Power-Valid Upper Limit|Contains limit value to compare all bus voltage conversions to determine if the Power Valid level has been reached.|00100111 00010000|2710|R/W![ref8]|
|11|Power-Valid Lower Limit|Contains limit value to compare all bus voltage conversions to determine if the any voltage rail has dropped below the Power Valid range.|00100011 00101000|2328|R/W![ref6]|
|FE|Manufacturer ID|Contains unique manufacturer identification number.|01010100 01001001|5449|R|
|FF|Die ID|Contains unique die identification number.|00110010 00100000|3220|R|

(1) Type: R = read-only, R/W = read/write.![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.071.png)![ref4]

24  [*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221) Copyright © 2012–2016, Texas Instruments Incorporated

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*

[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.072.png)

2. **Register Descriptions**

All 16-bit INA3221 registers are two 8-bit bytes via the I2C interface. [Table 4](#_page24_x0.00_y129.20) shows a register map for the INA3221.

**Table 4. Register Map![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.073.png)**



|**REGISTER**|<a name="_page24_x0.00_y129.20"></a>**ADDRESS (Hex)**|**D15**|**D14**|**D13**|**D12**|**D11**|**D10**|**D9**|**D8**|**D7**|**D6**|**D5**|**D4**|**D3**|**D2**|**D1**|**D0**|
| - | :-: | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|Configuration|00|RST|CH1en|CH2en|CH3en|AVG2|AVG1|AVG0|VBUSCT2|VBUSCT1|VBUSCT0|VSHCT2|VSHCT1|VSHCT0|MODE3|MODE2|MODE1|
|Channel-1 Shunt Voltage|01|SIGN|SD11|SD10|SD9|SD8|SD7|SD6|SD5|SD4|SD3|SD2|SD1|SD0|—|—|—|
|Channel-1 Bus Voltage|02|SIGN|BD11|BD10|BD9|BD8|BD7|BD6|BD5|BD4|BD3|BD2|BD1|BD0|—|—|—|
|Channel-2 Shunt Voltage|03|SIGN|SD11|SD10|SD9|SD8|SD7|SD6|SD5|SD4|SD3|SD2|SD1|SD0|—|—|—|
|Channel-2 Bus Voltage|04|SIGN|BD11|BD10|BD9|BD8|BD7|BD6|BD5|BD4|BD3|BD2|BD1|BD0|—|—|—|
|Channel-3 Shunt Voltage|05|SIGN|SD11|SD10|SD9|SD8|SD7|SD6|SD5|SD4|SD3|SD2|SD1|SD0|—|—|—|
|Channel-3 Bus Voltage|06|SIGN|BD11|BD10|BD9|BD8|BD7|BD6|BD5|BD4|BD3|BD2|BD1|BD0|—|—|—|
|Channel-1 Critical-Alert Limit|07|C1L12|C1L11|C1L10|C1L9|C1L8|C1L7|C1L6|C1L5|C1L4|C1L3|C1L2|C1L1|C1L0|—|—|—|
|Channel-1 Warning-Alert Limit|08|W1L12|W1L11|W1L10|W1L9|W1L8|W1L7|W1L6|W1L5|W1L4|W1L3|W1L2|W1L1|W1L0|—|—|—|
|Channel-2 Critical-Alert Limit|09|C2L12|C2L11|C2L10|C2L9|C2L8|C2L7|C2L6|C2L5|C2L4|C2L3|C2L2|C2L1|C2L0|—|—|—|
|Channel-2 Warning-Alert Limit|0A|W2L12|W2L11|W2L10|W2L9|W2L8|W2L7|W2L6|W2L5|W2L4|W2L3|W2L2|W2L1|W2L0|—|—|—|
|Channel-3 Critical-Alert Limit|0B|C3L12|C3L11|C3L10|C3L9|C3L8|C3L7|C3L6|C3L5|C3L4|C3L3|C3L2|C3L1|C3L0|—|—|—|
|Channel-3 Warning-Alert Limit|0C|W3L12|W3L11|W3L10|W3L9|W3L8|W3L7|W3L6|W3L5|W3L4|W3L3|W3L2|W3L1|W3L0|—|—|—|
|Shunt-Voltage Sum|0D|SIGN|SV13|SV12|SV11|SV10|SV9|SV8|SV7|SV6|SV5|SV4|SV3|SV2|SV1|SV0|—|
|Shunt-Voltage Sum Limit|0E|SIGN|SVL13|SVL12|SVL11|SVL10|SVL9|SVL8|SVL7|SVL6|SVL5|SVL4|SVL3|SVL2|SVL1|SVL0|—|
|Mask/Enable|0F|—|SCC1|SCC2|SCC3|WEN|CEN|CF1|CF2|CF3|SF|WF1|WF2|WF3|PVF|TCF|CVRF|
|Power-Valid Upper Limit|10|PVU12|PVU11|PVU10|PVU9|PVU8|PVU7|PVU6|PVU5|PVU4|PVU3|PVU2|PVU1|PVU0|—|—|—|
|Power-Valid Lower Limit|11|PVL12|PVL11|PVL10|PVL9|PVL8|PVL7|PVL6|PVL5|PVL4|PVL3|PVL2|PVL1|PVL0|—|—|—|
|Manufacturer ID|FE|0|1|0|1|0|1|0|0|0|1|0|0|1|0|0|1|
|Die ID|FF|0|0|1|1|0|0|1|0|0|0|1|0|0|0|0|0|

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 25

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*


[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

SBOS576B–MAY 2012–REVISED MARCH 2016 **[**www.ti.com**](http://www.ti.com)![ref3]**

1. ***Configuration Register (address = 00h) [reset = 7127h]***

The Configuration register settings control the operating modes for the shunt- and bus-voltage measurements for the three input channels. This register controls the conversion time settings for both the shunt- and bus-voltage measurements and the averaging mode used. The Configuration register is used to independently enable or disable each channel, as well as select the operating mode that controls which signals are selected to be measured.

This register can be read from at any time without impacting or affecting either device settings or conversions in progress. Writing to this register halts any conversion in progress until the write sequence is completed, resulting in a new conversion starting, based on the new Configuration register contents. This architecture prevents any uncertainty in the conditions used for the next completed conversion.

**Figure 32. Configuration Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|RST|CH1en|CH2en|CH3en|AVG2|AVG1|AVG0|VBUS CT2|VBUS CT1|VBUS CT0|VSH CT2|VSH CT1|VSH CT0|MODE 3|MODE 2|MODE 1|
|RW-0 RW-1 RW-1 RW-1 RW-0 RW-0 RW-0 RW-1 RW-0 RW-0 RW-1 RW-0 RW-0 RW-1 RW-1 RW-1||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 5. Configuration Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|RST|R/W|0h|Reset bit. Set this bit = 1 to generate a system reset that is the same as a power-on reset (POR). This bit resets all registers to default values and self-clears.|
|14|CH1en|R/W|7h|<p>Channel enable mode. These bits allow each channel to be independently enabled or disabled.</p><p>0 = Channel disable</p><p>1 = Channel enable (default)</p>|
|13|CH2en||||
|12|CH3en||||
|11-9|AVG2-0|R/W|0h|<p>Averaging mode. These bits set the number of samples that are collected and averaged together.</p><p>000 = 1 (default)</p><p>001 = 4</p><p>010 = 16</p><p>011 = 64</p><p>100 = 128</p><p>101 = 256</p><p>110 = 512</p><p>111 = 1024</p>|
|8-6|VBUSCT2-0|R/W|4h|<p>Bus-voltage conversion time. These bits set the conversion time for the bus-voltage measurement.</p><p>000 = 140 μs</p><p>001 = 204 μs</p><p>010 = 332 μs</p><p>011 = 588 μs</p><p>100 = 1.1 ms (default)</p><p>101 = 2.116 ms</p><p>110 = 4.156 ms</p><p>111 = 8.244 ms</p>|
|5-3|VSHCT2-0|R/W|4h|<p>Shunt-voltage conversion time. These bits set the conversion time for the shunt-voltage measurement.</p><p>The conversion-time bit settings for VSHCT2-0 are the same as VBUSCT2-0 (bits 8-6) listed in the previous row.</p>|
|2-0|MODE3-1|R/W|7h|<p>Operating mode. These bits select continuous, single-shot (triggered), or power-down mode of operation. These bits default to continuous shunt and bus mode.</p><p>000 = Power-down</p><p>001 = Shunt voltage, single-shot (triggered)</p><p>010 = Bus voltage, single-shot (triggered)</p><p>011 = Shunt and bus, single-shot (triggered)</p><p>100 = Power-down</p><p>101 = Shunt voltage, continuous</p><p>110 = Bus voltage, continuous</p><p>111 = Shunt and bus, continuous (default)</p>|

26  [*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221) Copyright © 2012–2016, Texas Instruments Incorporated

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

2. ***Channel-1 Shunt-Voltage Register (address = 01h), [reset = 00h]***

This register contains the averaged shunt-voltage measurement for channel 1. This register stores the current shunt-voltage reading, VSHUNT, for channel 1. Negative numbers are represented in twos complement format. Generate the twos complement of a negative number by complementing the absolute value binary number and adding 1. Extend the sign, denoting a negative number by setting MSB = 1.

Full-scale range = 163.8 mV (decimal = 7FF8); LSB (SD0): 40 μV.

Example: For a value of VSHUNT = –80 mV:

1. Take the absolute value: 80 mV
1. Translate this number to a whole decimal number (80 mV / 40 µV) = 2000
1. Convert this number to binary = 011 1110 1000 0\_ \_ \_ (last three bits are set to 0)
1. Complement the binary result = 100 0001 0111 1111
1. Add 1 to the complement to create the twos complement result = 100 0001 1000 0000
1. Extend the sign and create the 16-bit word: 1100 0001 1000 0000 = C180h

**Figure 33. Channel-1 Shunt-Voltage Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|SIGN|SD11|SD10|SD9|SD8|SD7|SD6|SD5|SD4|SD3|SD2|SD1|SD0|—|—|—|
|R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 6. Channel-1 Shunt-Voltage Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-3|SD11-0|R|0h|Channel-1 shunt-voltage data bits|
|2-0|Reserved|R|0h|Reserved|

3. ***Channel-1 Bus-Voltage Register (address = 02h) [reset = 00h]***

This register stores the bus voltage reading, VBUS, for channel 1. Full-scale range = 32.76 V (decimal = 7FF8); LSB (BD0) = 8 mV. Although the input range is 26 V, the full-scale range of the ADC scaling is 32.76 V. Do not apply more than 26 V.

**Figure 34. Channel-1 Bus-Voltage Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|SIGN|BD11|BD10|BD9|BD8|BD7|BD6|BD5|BD4|BD3|BD2|BD1|BD0|—|—|—|
|R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 7. Channel-1 Bus-Voltage Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format.</p>|
|14-3|BD11-0|R|0h|Channel-1 bus-voltage data bits|
|2-0|Reserved|R|0h|Reserved|

4. ***Channel-2 Shunt-Voltage Register (address = 03h) [reset = 00h]***

This register contains the averaged shunt voltage measurement for channel 2. Full-scale range = 163.8 mV (decimal = 7FF8); LSB (SD0): 40 μV. Although the input range is 26 V, the full-scale range of the ADC scaling is 32.76 V. Do not apply more than 26 V.

**Figure 35. Channel-2 Shunt-Voltage Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|SIGN|SD11|SD10|SD9|SD8|SD7|SD6|SD5|SD4|SD3|SD2|SD1|SD0|—|—|—|
|R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 8. Channel-2 Shunt-Voltage Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-3|SD11-0|R|0h|Channel-2 shunt-voltage data bits|
|2-0|Reserved|R|0h|Reserved|

5. ***Channel-2 Bus-Voltage Register (address = 04h) [reset = 00h]***

This register stores the bus voltage reading, VBUS, for channel 2. Full-scale range = 32.76 V (decimal = 7FF8); LSB (BD0) = 8 mV. Although the input range is 26 V, the full-scale range of the ADC scaling is 32.76 V. Do not apply more than 26 V.

**Figure 36. Channel-2 Bus-Voltage Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|SIGN|BD11|BD10|BD9|BD8|BD7|BD6|BD5|BD4|BD3|BD2|BD1|BD0|—|—|—|
|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 9. Channel-2 Bus-Voltage Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-3|BD11-0|R|0h|Channel-2 bus-voltage data bits|
|2-0|Reserved|R|0h|Reserved|

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 33

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

6. ***Channel-3 Shunt-Voltage Register (address = 05h) [reset = 00h]***

This register contains the averaged shunt voltage measurement for channel 3. Full-scale range = 163.8 mV (decimal = 7FF8); LSB (SD0): 40 μV.

**Figure 37. Channel-3 Shunt-Voltage Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|SIGN|SD11|SD10|SD9|SD8|SD7|SD6|SD5|SD4|SD3|SD2|SD1|SD0|—|—|—|
|R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 10. Channel-3 Shunt-Voltage Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-3|SD11-0|R|0h|Channel-3 shunt-voltage data bits|
|2-0|Reserved|R|0h|Reserved|

7. ***Channel-3 Bus-Voltage Register (address = 06h) [reset = 00h]***

This register stores the bus voltage reading, VBUS, for channel 3. Full-scale range = 32.76 V (decimal = 7FF8); LSB (BD0) = 8 mV. Although the input range is 26 V, the full-scale range of the ADC scaling is 32.76 V. Do not apply more than 26 V.

**Figure 38. Channel-3 Bus-Voltage Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|SIGN|BD11|BD10|BD9|BD8|BD7|BD6|BD5|BD4|BD3|BD2|BD1|BD0|—|—|—|
|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|R-0|

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 11. Channel-3 Bus-Voltage Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-3|BD11-0|R|0h|Channel-3 bus-voltage data bits|
|2-0|Reserved|R|0h|Reserved|

8. ***Channel-1 Critical-Alert Limit Register (address = 07h) [reset = 7FF8h]***

This register contains the value used to compare to each shunt voltage conversion on channel 1 to detect fast overcurrent events.

**Figure 39. Channel-1 Critical-Alert Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|C1L12|C1L11|C1L10|C1L9|C1L8|C1L7|C1L6|C1L5|C1L4|C1L3|C1L2|C1L1|C1L0|—|—|—|
|RW-0 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-0 RW-0 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 12. Channel-1 Critical-Alert Limit Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15-3|C1L12-0|R/W|FFFh|Channel-1 critical-alert-limit data bits|
|2-0|Reserved|R/W|0h|Reserved|

9. ***Warning-Alert Channel-1 Limit Register (address = 08h) [reset = 7FF8h]***

This register contains the value used to compare to the averaged shunt voltage value of channel 1 to detect a longer duration overcurrent event.

**Figure 40. Channel-1 Warning-Alert Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|W1L12|W1L11|W1L10|W1L9|W1L8|W1L7|W1L6|W1L5|W1L4|W1L3|W1L2|W1L1|W1L0|—|—|—|
|RW-0 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-0 RW-0 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 13. Channel-1 Warning-Alert Limit Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15-3|W1L12-0|R/W|FFFh|Channel-1 warning-alert-limit data bits|
|2-0|Reserved|R/W|0h|Reserved|

10. ***Channel-2 Critical-Alert Limit Register (address = 09h) [reset = 7FF8h]***

This register contains the value used to compare to each shunt voltage conversion on channel 2 to detect fast overcurrent events.

**Figure 41. Channel-2 Critical-Alert Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|C2L12|C2L11|C2L10|C2L9|C2L8|C2L7|C2L6|C2L5|C2L4|C2L3|C2L2|C2L1|C2L0|—|—|—|
|RW-0 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-0 RW-0 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 14. Channel-2 Critical-Alert Limit Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15-3|C2L12-0|R/W|FFFh|Channel-2 critical-alert-limit data bits|
|2-0|Reserved|R/W|0h|Reserved|

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 35

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

11. ***Channel-2 Warning-Alert Limit Register (address = 0Ah) [reset = 7FF8h]***

This register contains the value used to compare to the averaged shunt voltage value of channel 2 to detect a longer duration overcurrent event.

**Figure 42. Channel-2 Warning-Alert Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|W2L12|W2L11|W2L10|W2L9|W2L8|W2L7|W2L6|W2L5|W2L4|W2L3|W2L2|W2L1|W2L0|—|—|—|
|RW-0 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-0 RW-0 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 15. Channel-2 Warning-Alert Limit Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15-3|W2L12-0|R/W|FFFh|Channel-2 warning-alert-limit data bits|
|2-0|Reserved|R/W|0h|Reserved|

12. ***Channel-3 Critical-Alert Limit Register (address = 0Bh) [reset = 7FF8h]***

This register contains the value used to compare to each shunt voltage conversion on channel 3 to detect fast overcurrent events.

**Figure 43. Channel-3 Critical-Alert Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|C3L12|C3L11|C3L10|C3L9|C3L8|C3L7|C3L6|C3L5|C3L4|C3L3|C3L2|C3L1|C3L0|—|—|—|
|RW-0 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-0 RW-0 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 16. Channel-3 Critical-Alert Limit Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15-3|C3L12-0|R/W|FFFh|Channel-3 critical-alert-limit data bits|
|2-0|Reserved|R/W|0h|Reserved|

13. ***Channel-3 Warning-Alert Limit Register (address = 0Ch) [reset = 7FF8h]***

This register contains the value used to compare to the averaged shunt voltage value of channel 3 to detect a longer duration overcurrent event.

**Figure 44. Channel-3 Warning-Alert Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|W3L12|W3L11|W3L10|W3L9|W3L8|W3L7|W3L6|W3L5|W3L4|W3L3|W3L2|W3L1|W3L0|—|—|—|
|RW-0 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-0 RW-0 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 17. Channel-3 Warning-Alert Limit Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15-3|W3L12-0|R/W|FFFh|Channel-3 warning-alert limit data bits|
|2-0|Reserved|R/W|0h|Reserved|

14. ***Shunt-Voltage Sum Register (address = 0Dh) [reset = 00h]***

This register contains the sum of the single conversion shunt voltages of the selected channels based on the summation control bits 12, 13, and 14 in the Mask/Enable register.

This register is updated with the most recent sum following each complete cycle of all selected channels. The Shunt-Voltage Sum register LSB value is 40 µV.

**Figure 45. Shunt-Voltage Sum Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|SIGN|SV13|SV12|SV11|SV10|SV9|SV8|SV7|SV6|SV5|SV4|SV3|SV2|SV1|SV0|—|
|R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0 R-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 18. Shunt-Voltage Sum Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-1|SV13-0|R|0h|Shunt-voltage sum data bits|
|0|Reserved|R|0h|Reserved|

15. ***Shunt-Voltage Sum-Limit Register (address = 0Eh) [reset = 7FFEh]***

This register contains the value that is compared to the Shunt-Voltage Sum register value following each completed cycle of all selected channels to detect for system overcurrent events. The Shunt-Voltage Sum-Limit register LSB value is 40 µV.

**Figure 46. Shunt-Voltage Sum-Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|SIGN|SVL13|SVL12|SVL11|SVL10|SVL9|SVL8|SVL7|SVL6|SVL5|SVL4|SVL3|SVL2|SVL1|SVL0|—|
|RW-0 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-1 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 19. Shunt-Voltage Sum-Limit Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-1|SVL13-0|R|0h|Shunt-voltage sum-limit data bits|
|0|Reserved|R|0h|Reserved|

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 37

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

16. ***Mask/Enable Register (address = 0Fh) [reset = 0002h]***

This register selects which function is enabled to control the Critical alert and Warning alert pins, and how each warning alert responds to the corresponding channel. Read the Mask/Enable register to clear any flag results present. Writing to this register does not clear the flag bit status. To make sure that there is no uncertainty in the warning function setting that resulted in a flag bit being set, the Mask/Enable register should be read from to clear the flag bit status before changing the warning function setting.

**Figure 47. Mask/Enable Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|—|SCC1|SCC2|SCC3|WEN|CEN|CF1|CF2|CF3|SF|WF1|WF2|WF3|PVF|TCF|CVRF|
|RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-0 RW-1 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 20. Mask/Enable Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|Reserved|R/W|0h|Reserved|
|14-12|SCC1-3|R/W|0h|<p>Summation channel control. These bits determine which shunt voltage measurement channels are enabled to fill the Shunt-Voltage Sum register. The selection of these bits does not impact the individual channel enable or disable status, or the corresponding channel measurements. The corresponding bit is used to select if the channel is used to fill the Shunt-Voltage Sum register.</p><p>0 = Disabled (default)</p><p>1 = Enabled</p>|
|11|WEN|R/W|0h|<p>Warning alert latch enable. These bits configure the latching feature of the Warning alert pin.</p><p>0 = Transparent (default)</p><p>1 = Latch enabled</p>|
|10|CEN|R/W|0h|<p>Critical alert latch enable. These bits configure the latching feature of the Critical alert pin.</p><p>0 = Transparent (default)</p><p>1 = Latch enabled</p>|
|9-7|CF1-3|R/W|0h|Critical-alert flag indicator. These bits are asserted if the corresponding channel measurement has exceeded the critical alert limit resulting in the Critical alert pin being asserted. Read these bits to determine which channel caused the critical alert. The critical alert flag bits are cleared when the Mask/Enable register is read back.|
|6|SF|R/W|0h|Summation-alert flag indicator. This bit is asserted if the Shunt Voltage Sum register exceeds the Shunt Voltage Sum Limit register. If the summation alert flag is asserted, the Critical alert pin is also asserted. The Summation Alert Flag bit is cleared when the Mask/Enable register is read back.|
|5-3|WF1-3|R/W|0h|Warning-alert flag indicator. These bits are asserted if the corresponding channel averaged measurement has exceeded the warning alert limit, resulting in the Warning alert pin being asserted. Read these bits to determine which channel caused the warning alert. The Warning Alert Flag bits clear when the Mask/Enable register is read back.|
|2|PVF|R/W|0h|Power-valid-alert flag indicator. This bit can be used to be able to determine if the power valid (PV) alert pin has been asserted through software rather than hardware. The bit setting corresponds to the status of the PV pin. This bit does not clear until the condition that caused the alert is removed, and the PV pin has cleared.|
|1|TCF|R/W|11h|Timing-control-alert flag indicator. Use this bit to determine if the timing control (TC) alert pin has been asserted through software rather than hardware. The bit setting corresponds to the status of the TC pin. This bit does not clear after it has been asserted unless the power is recycled or a software reset is issued. The default state for the timing control alert flag is high.|
|0|CVRF|R/W|0h|<p>Conversion-ready flag. Although the INA3221 can be read at any time, and the data from the last conversion are available, the conversion ready bit is provided to help coordinate single-shot conversions. The conversion bit is set after all conversions are complete. Conversion ready clears under the following conditions:</p><p>1. Writing the Configuration register (except for power-down or disable-mode selections).</p><p>2. Reading the Mask/Enable register.</p>|
17. ***Power-Valid Upper-Limit Register (address = 10h) [reset = 2710h]***

This register contains the value used to determine if the power-valid conditions are met. The power-valid condition is reached when all bus-voltage channels exceed the value set in this limit register. When the power- valid condition is met, the PV alert pin asserts high to indicate that the INA3221 has confirmed all bus voltage channels are above the power-valid upper-limit value. In order for the power-valid conditions to be monitored, the bus measurements must be enabled through one of the corresponding MODE bits set in the Configuration register. The power-valid upper-limit LSB value is 8 mV. Power-on reset value is 2710h = 10.000 V.

**Figure 48. Power-Valid Upper-Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|<a name="_page33_x0.00_y195.50"></a>SIGN|PVU11|PVU10|PVU9|PVU8|PVU7|PVU6|PVU5|PVU4|PVU3|PVU2|PVU1|PVU0|—|—|—|
|RW-0 RW-0 RW-1 RW-0 RW-0 RW-1 RW-1 RW-1 RW-0 RW-0 RW-0 RW-1 RW-0 RW-0 RW-0 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 21. Power-Valid Upper-Limit Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R/W|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-3|PVU11-0|R/W|4E2h|Power-valid upper-limit data bits|
|2-0|Reserved|R/W|0h|Reserved|

18. ***Power-Valid Lower-Limit Register (address = 11h) [reset = 2328h]***

This register contains the value used to determine if any of the bus-voltage channels drops below the power-valid lower-limit when the power-valid conditions are met. This limit contains the value used to compare all bus- channel readings to make sure that all channels remain above the power-valid lower-limit, thus maintaining the power-valid condition. If any bus-voltage channel drops below the power-valid lower-limit, the PV alert pin pulls low to indicate that the INA3221 detects a bus voltage reading below the power-valid lower-limit. In order for the power-valid condition to be monitored, the bus measurements must be enabled through the mode (MODE3-1) bits set in the Configuration register. The power-valid lower-limit LSB value is 8 mV. Power-on reset value is 2328h = 9.000 V.

**Figure 49. Power-Valid Lower-Limit Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|<a name="_page33_x0.00_y478.40"></a>SIGN|PVL11|PVL10|PVL9|PVL8|PVL7|PVL6|PVL5|PVL4|PVL3|PVL2|PVL1|PVL0|—|—|—|
|RW-0 RW-0 RW-1 RW-0 RW-0 RW-0 RW-1 RW-1 RW-0 RW-0 RW-1 RW-0 RW-1 RW-0 RW-0 RW-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 22. Power-Valid Lower-Limit Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15|SIGN|R/W|0h|<p>Sign bit.</p><p>0 = positive number</p><p>1 = negative number in twos complement format</p>|
|14-3|PVL11-0|R/W|465h|Power-valid lower-limit data bits|
|2-0|Reserved|R/W|0h|Reserved|

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 39

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

19. ***Manufacturer ID Register (address = FEh) [reset = 5449h]***

This register contains a factory-programmable identification value that identifies this device as being manufactured by Texas Instruments. This register distinguishes this device from other devices that are on the same I2C bus. The contents of this register are 5449h, or TI in ASCII.

**Figure 50. Manufacturer ID Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|R-0 R-1 R-0 R-1 R-0 R-1 R-0 R-0 R-0 R-1 R-0 R-0 R-1 R-0 R-0 R-1||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 23. Manufacturer ID Register Field Descriptions**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15-0|D15-0|R|5449h|Manufacturer ID bits|

20. ***Die ID Register (address = FFh) [reset = 3220]***

This register contains a factory-programmable identification value that identifies this device as an INA3221. This register distinguishes this device from other devices that are on the same I2C bus. The Die ID for the INA3221 is

3220h.

**Figure 51. Die ID Register**



|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0|
| - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
|D15|D14|D13|D12|D11|D10|D9|D8|D7|D6|D5|D4|D3|D2|D1|D0|
|R-0 R-0 R-1 R-1 R-0 R-0 R-1 R-0 R-0 R-0 R-1 R-0 R-0 R-0 R-0 R-0||||||||||||||||

LEGEND: R/W = Read/Write; R = Read only; -n = value after reset

**Table 24. Die ID Register Field Descriptions![ref4]**



|**Bit**|**Field**|**Type**|**Reset**|**Description**|
| - | - | - | - | - |
|15-0|D15-0|R|3220h|Die ID bits|

<a name="_page35_x0.00_y72.00"></a>**9 Application and Implementation![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.074.png)**

**NOTE**

Information in the following applications sections is not part of the TI component specification, and TI does not warrant its accuracy or completeness. TI’s customers are responsible for determining suitability of components for their purposes. Customers should validate and test their design implementation to confirm system functionality.![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.075.png)

1. **Application<a name="_page35_x0.00_y174.90"></a> Information**

INA3221 is a three-channel current and bus voltage monitor with I2C/SMBUS-compatible interface. It features programmable conversion times and averaging modes and offers both critical and warning alerts to detect multiple programmable out-of-range conditions for each channel.

2. **Typical<a name="_page35_x0.00_y236.70"></a> Application**

The INA3221 measures the voltage developed across a current-sensing resistor when current passes through it. The device also measures the bus supply voltage at the IN- pin. Multiple monitoring functions are supported using four alert pins: Critical, Warning, PV, and TC. Programmable thresholds make sure operation is within desired operating conditions. This design illustrates the ability of the Critical alert pin to respond to a set threshold.

[Figure 52](#_page35_x0.00_y656.00) illustrates a typical INA3221 application circuit using all three channels. For best performance, use a 0.1-μF ceramic capacitor for power-supply bypassing, placed as close as possible to the supply and ground pins. The digital pins (SCL, SDA, Critical, Warning, TC) are connected to supply through pull-up resistors. The power valid (PV) alert pin is connected to the VPU pin through a pull-up resistor to enable power-valid monitoring.

Power Supply 

(0 V to 26 V) CBYPASS![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.076.png)

0\.1 µF

Load 1

VS (Supply 

VIN+1 VIN±1 Voltage) 10 k

Power Supply 

(0 V to 26 V) SDA

I2C-

CH 1 and SCL

Bus SMBus-

V CH 2 Voltages 1-3 Compatible A0

IN+2 Shunt Interface VPU VS VIN±2 ADC Voltages 1-3

Critical Limit  10 k

Alerts 1-3 VPU

Power Valid (PV)

CH 3 Shunt Voltage 

Load 2 Critical

Sum Alerts 

Warning Timing Control (TC)

GND

VIN+3 VIN±3

Power Supply 

(0 V to 26 V) Load 3

<a name="_page35_x0.00_y656.00"></a><a name="_page35_x0.00_y369.50"></a>**Figure 52. INA3221 as an Overcurrent Sensor![ref4]**

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 41

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

**Typical Application (continued)**

1. **Design Requirements**

For this design example, use the input parameters shown in [Table 25](#_page36_x0.00_y145.80). All other register settings are default.

**Table 25. Design Parameters**



|<a name="_page36_x0.00_y145.80"></a>**DESIGN PARAMETER**|**EXAMPLE VALUE**|
| - | - |
|Supply voltage, VS|5 V|
|Pull-up resistors|10 kΩ|
|Input range|–163.84 to +163.8|
|Enabled channel|CH1|
|Operating mode|Shunt voltage, continuous|
|Average setting|1|
|Critical alert limit|80 mV|
|Critical Alert Limit register setting|7D0h|

2. **Detailed Design Procedure**

This design shows two shunt voltage conversion times in order to demonstrate the difference in the alert response times. This design generates a critical-alert response when the input voltage exceeds 80 mV on channel 1. See [Table 25](#_page36_x0.00_y145.80) for all design parameters.

For the first example the shunt voltage conversion time is set to 1.1 ms. When the input signal exceeds 80 mV, the Critical alert pin pulls low after the conversion cycle completes, indicating an overcurrent condition, as shown in [Figure 53](#_page36_x0.00_y450.60).

For the second example, the conversion time is set to 588 µs, and the response is shown in [Figure 54](#_page36_x0.00_y450.60).

3. **Application Curves**

[Figure 53](#_page36_x0.00_y450.60) shows the Critical alert pin response to a shunt voltage overlimit of 80 mV for a conversion time of 1.1 ms. [Figure 54](#_page36_x0.00_y450.60) shows the response for the same limit, but with the conversion time reduced to 588 µs.![ref4]



|||||||||||||||||||||||||||
| :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- |
|||||||||||||||||||||||||||
|||||||||||||||||||||||||||
|||||||||||||||||||||||||||
|||||CR IN|ITIC PUT|AL A|LERT|||||||||CRITI INPUT|CAL AL|ERT||||||||
|||||||||||||||||||||||||||
|||||LI|MIT|||||||||||LIMIT||||||||||
|||||||||||||||||||||||||||
|||||||||||||||||||||||||||
|||||||||||||||||||||||||||
|||||||||||||||||||||||||||
|||||||||||||||||||||||||||
|||||||||||||||||||||||||||
|||||||||||||||||||||||||||
|<p>Time (200  Ps/div)</p><p><a name="_page36_x0.00_y450.60"></a>Configuration register = 4125h, conversion time = 588 µs</p><p>**Figure 53. Critical Alert Response for 1.1-ms Conversion Time**</p>||<p>Time (100  Ps/div)</p><p>Configuration register = 40DDh, conversion time = 588 µs</p><p>**Figure 54. Critical Alert Response for 588-µs Conversion Time**</p>||||||||||||||||||||||||
<a name="_page37_x0.00_y72.00"></a>**10 Power Supply Recommendations**

The input circuitry of the device can accurately measure signals on common-mode voltages beyond its power supply voltage, VS. For example, the voltage applied to the VS power supply terminal can be 5 V, whereas the load power-supply voltage being monitored (the common-mode voltage) on any one of the three channels can be as high as 26 V. Note also that the device can withstand the full 0-V to 26-V range at the input terminals, regardless of whether the device has power applied or not. Place the required power-supply bypass capacitors as close as possible to the supply and ground terminals of the device to ensure stability. A typical value for this supply bypass capacitor is 0.1 μF. Applications with noisy or high-impedance power supplies may require additional decoupling capacitors to reject power-supply noise.

<a name="_page37_x0.00_y198.80"></a>**11 Layout**

1. **Layout<a name="_page37_x0.00_y225.80"></a> Guidelines**

Connect the input pins (IN+ and IN–) of all the used channels to the sensing resistor using a Kelvin connection or a 4-wire connection. These connection techniques ensure that only the current-sensing resistor impedance is detected between the input pins. Poor routing of the current-sensing resistor commonly results in additional resistance present between the input pins. Given the very low ohmic value of the current-sensing resistor, any additional high-current carrying impedance causes significant measurement errors. Place the power-supply bypass capacitor as close as possible to the supply and ground pins.

2. **Layout<a name="_page37_x0.00_y320.60"></a> Example**

To Load Connect to  Timing Control Output  To Bus Power Supply![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.077.png)

bus power-

supply rail

IN3 IN+1

IN+3 IN1

Connect GND PV

Supply  to VPU Bypass 

Capacitor Critical VS Critical Output 

To Bus Power  To Load

Supply

Via to Ground Plane 2 Via to Power Plane

` `I C- and SMBUS-

Compatible Interface Warning Output 

**Figure 55. Layout Example![ref4]**

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 43

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
[**INA3221**](http://www.ti.com/product/ina3221?qgpn=ina3221)![ref2]

[**www.ti.com**](http://www.ti.com) SBOS576B–MAY 2012–REVISED MARCH 2016![ref3]

<a name="_page38_x0.00_y72.00"></a>**12 Device and Documentation Support**

1. **Device<a name="_page38_x0.00_y99.00"></a> Support**

**12.1.1 Development Support**

- For INA3221 evaluation module (EVM), go to [www.ti.com/tool/INA3221EVM](http://www.ti.com/tool/INA3221EVM)
2. **Documentation<a name="_page38_x0.00_y160.70"></a> Support**

**12.2.1 Related Documentation**

- INA3221EVM User Guide, [SBOU126](http://www.ti.com/lit/pdf/sbou126)
3. **Community<a name="_page38_x0.00_y222.40"></a> Resources**

The following links connect to TI community resources. Linked contents are provided "AS IS" by the respective contributors. They do not constitute TI specifications and do not necessarily reflect TI's views; see TI's [Terms of Use](http://www.ti.com/corp/docs/legal/termsofuse.shtml).

[**TI E2E™ Online Community**](http://e2e.ti.com) ***TI's Engineer-to-Engineer (E2E) Community.*** Created to foster collaboration

among engineers. At e2e.ti.com, you can ask questions, share knowledge, explore ideas and help solve problems with fellow engineers.

[**Design Support**](http://support.ti.com/) ***TI's Design Support*** Quickly find helpful E2E forums along with design support tools and

contact information for technical support.

4. **Trademarks**

<a name="_page38_x0.00_y349.30"></a>E2E is a trademark of Texas Instruments.

All other trademarks are the property of their respective owners.

5. **Electrostatic<a name="_page38_x0.00_y391.80"></a> Discharge Caution**

This integrated circuit can be damaged by ESD. Texas Instruments recommends that all integrated circuits be handled with appropriate![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.078.png) precautions. Failure to observe proper handling and installation procedures can cause damage.

ESD damage can range from subtle performance degradation to complete device failure. Precision integrated circuits may be more susceptible to damage because very small parametric changes could cause the device not to meet its published specifications.

6. **Glossary**

<a name="_page38_x0.00_y460.30"></a>[SLYZ022](http://www.ti.com/lit/pdf/SLYZ022) — *TI Glossary*.

This glossary lists and explains terms, acronyms, and definitions.

<a name="_page38_x0.00_y519.40"></a>**13 Mechanical, Packaging, and Orderable Information**

The following pages include mechanical, packaging, and orderable information. This information is the most current data available for the designated devices. This data is subject to change without notice and revision of this document. For browser-based versions of this data sheet, refer to the left-hand navigation.![ref4]

Copyright © 2012–2016, Texas Instruments Incorporated *[*Submit Documentation Feedback*](http://www.go-dsp.com/forms/techdoc/doc_feedback.htm?litnum=SBOS576B&partnum=INA3221)* 45

Product Folder Links: *[*INA3221*](http://www.ti.com/product/ina3221?qgpn=ina3221)*
**PACKAGE OPTION ADDENDUM![ref9]**

www.ti.com 10-Dec-2020![ref10]

**PACKAGING INFORMATION**



|**Orderable Device**|<p>**Status**</p><p>(1)</p>|**Package Type**|**Package Drawing**|**Pins**|**Package Qty**|<p>**Eco Plan**</p><p>(2)</p>|<p>**Lead finish/ Ball material**</p><p>(6)</p>|<p>**MSL Peak Temp**</p><p>(3)</p>|**Op Temp ( C)**|<p>**Device Marking**</p><p>(4/5)</p>|**Samples**|
| - | - | - | - | - | :-: | - | :- | - | - | - | - |
|INA3221AIRGVR|ACTIVE|VQFN|RGV|16|2500|RoHS & Green|NIPDAU|Level-2-260C-1 YEAR|-40 to 125|INA 3221|![ref11]|
|INA3221AIRGVT|ACTIVE|VQFN|RGV|16|250|RoHS & Green|NIPDAU|Level-2-260C-1 YEAR|-40 to 125|INA 3221|![ref11]|

1) The marketing status values are defined as follows:

**ACTIVE:** Product device recommended for new designs.

**LIFEBUY:** TI has announced that  the device will be discontinued, and a lifetime-buy period is in effect.

**NRND:** Not recommended for new designs. Device is in production to support existing customers, but TI does not recommend using this part in a new design. **PREVIEW:** Device has been announced but is not in production. Samples may or may not be available.

**OBSOLETE:** TI has discontinued the production of the device.

2) **RoHS:**  TI defines "RoHS" to mean semiconductor products that are compliant with the current EU RoHS requirements for all 10 RoHS substances, including the requirement that RoHS substance

do not exceed 0.1% by weight in homogeneous materials. Where designed to be soldered at high temperatures, "RoHS" products are suitable for use in specified lead-free processes.  TI may reference these types of products as "Pb-Free".

**RoHS Exempt:** TI defines "RoHS Exempt" to mean products that contain lead but are compliant with EU RoHS pursuant to a specific EU RoHS exemption.

**Green:** TI defines "Green" to mean the content of Chlorine (Cl) and Bromine (Br) based flame retardants meet JS709B low halogen requirements of <=1000ppm threshold. Antimony trioxide based flame retardants must also meet the <=1000ppm threshold requirement.

3) MSL, Peak Temp. - The Moisture Sensitivity Level rating according to the JEDEC industry standard classifications, and peak solder temperature.
3) There may be additional marking, which relates to the logo, the lot trace code information, or the environmental category on the device.
3) Multiple Device Markings will be inside parentheses. Only one Device Marking contained in parentheses and separated by a "~" will appear on a device. If a line is indented then it is a continuation of the previous line and the two combined represent the entire Device Marking for that device.
3) Lead finish/Ball material - Orderable Devices may have multiple material finish options. Finish options are separated by a vertical ruled line. Lead finish/Ball material values may wrap to two lines if the finish value exceeds the maximum column width.

**Important Information and Disclaimer:** The information provided on this page represents TI’s knowledge and belief as of the date that it is provided. TI bases its knowledge and belief on information provided by third parties, and makes no representation or warranty as to the accuracy of such information. Efforts are underway to better integrate information from third parties. TI has taken and continues to take reasonable  steps to provide representative and accurate information but may not have conducted destructive testing or chemical analysis on incoming materials and chemicals. TI and TI suppliers consider certain information to be proprietary, and thus CAS numbers and other limited information may not be available for release.

In no event shall TI’s liability arising out of such information exceed  the total purchase price of the TI part(s) at issue in this document sold by TI to Customer on an annual basis.![ref12]

www.ti.com 10-Dec-2020![ref10]

**OTHER QUALIFIED VERSIONS OF INA3221 :**

Automotive:  [INA3221-Q1](http://focus.ti.com/docs/prod/folders/print/ina3221-q1.html)

NOTE: Qualified Version Definitions:

Automotive - Q100 devices qualified for high-reliability automotive applications targeting zero defects![ref12]

Addendum-Page  1
**PACKAGE MATERIALS INFORMATION![ref13]**

www.ti.com 30-May-2024![ref14]

**TAPE AND REEL INFORMATION**

**REEL DIMENSIONS TAPE DIMENSIONS**

K0 P1![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.085.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.086.png)

B0 W

Reel

Diameter

Cavity A0



|A0|Dimension designed to accommodate the component width|
| - | - |
|B0|Dimension designed to accommodate the component length|
|K0|Dimension designed to accommodate the component thickness|
|W|Overall width of the carrier tape|
|P1|Pitch between successive cavity centers|

Reel Width (W1)

**QUADRANT ASSIGNMENTS FOR PIN 1 ORIENTATION IN TAPE**

Sprocket Holes![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.087.png)

Q1 Q2 Q1 Q2![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.088.png)

Q3 Q4 Q3 Q4 User Direction of Feed

Pocket Quadrants

\*All dimensions are nominal![ref15]

|**Device**|**Package Type**|**Package Drawing**|**Pins**|**SPQ**|**Reel Diameter (mm)**|**Reel Width W1 (mm)**|**A0 (mm)**|**B0 (mm)**|**K0 (mm)**|**P1 (mm)**|**W (mm)**|**Pin1 Quadrant**|
| - | :-: | - | - | - | :-: | :-: | :- | :- | :- | :- | :- | :- |
|INA3221AIRGVR|VQFN|RGV|16|2500|330\.0|12\.4|4\.25|4\.25|1\.15|8\.0|12\.0|Q2|
|INA3221AIRGVT|VQFN|RGV|16|250|180\.0|12\.4|4\.25|4\.25|1\.15|8\.0|12\.0|Q2|

**TAPE AND REEL BOX DIMENSIONS![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.090.png)**

***Width (mm)***

H

L

\*All dimensions are nominal![ref15]

|**Device**|**Package Type**|**Package Drawing**|**Pins**|**SPQ**|**Length (mm)**|**Width (mm)**|**Height (mm)**|
| - | - | - | - | - | - | - | - |
|INA3221AIRGVR|VQFN|RGV|16|2500|346\.0|346\.0|33\.0|
|INA3221AIRGVT|VQFN|RGV|16|250|210\.0|185\.0|35\.0|

Pack Materials-Page  1

**GENERIC PACKAGE VIEW**

**RGV 16 VQFN - 1 mm max height![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.091.png)**

**4 x 4, 0.65 mm pitch** PLASTIC QUAD FLATPACK - NO LEAD

![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.092.png)![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.093.png)

Images above are just a representation of the package family, actual package may vary. Refer to the product data sheet for package details.

4224748/A![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.094.png)

![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.095.png)

**PACKAGE OUTLINE![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.096.png)**

**RGV0016A VQFN - 1 mm max height**

SCALE  3.000![ref16]

PLASTIC QUAD FLATPACK - NO LEAD

B 4.15 A ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.098.png)3.85

PIN 1 INDEX AREA

4\.15 3.85

C

1\.0

0\.8

SEATING PLANE

0\.08 C

0\.05

0. 2.16 0.1

   2X  1.95

   SYMM (0.2) TYP

5 8

EXPOSED (0.37) TYP THERMAL PAD

4 9

2X  1.95 SYMM 17

2\.16 0.1

12X  0.65

1 12

PIN 1 ID 0.38 16 13 16X 0.23

1. C A B

16X 0.650.45 0.05

4219037/A   06/2019

NOTES:

1. All linear dimensions are in millimeters. Any dimensions in parenthesis are for reference only. Dimensioning and tolerancing     per ASME Y14.5M. 
1. This drawing is subject to change without notice. 
1. The package thermal pad must be soldered to the printed circuit board for thermal and mechanical performance.![ref17]

![ref18]

**EXAMPLE BOARD LAYOUT**

**RGV0016A VQFN - 1 mm max height![ref16]**

PLASTIC QUAD FLATPACK - NO LEAD

( 2.16) SYMM![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.101.png)

16 13 SEE SOLDER MASK

DETAIL

16X (0.75)

12

16X (0.305) 1

17 SYMM

12X (0.65) (3.65)

(0.83)

4

9

(R0.05) TYP

( 0.2) TYP VIA

5 8

(0.83)

(3.65)

LAND PATTERN EXAMPLE EXPOSED METAL SHOWN

SCALE: 20X

0\.07 MIN

0\.07 MAX ALL AROUND ALL AROUND

METAL UNDER METAL EDGE SOLDER MASK

EXPOSED METAL SOLDER MASK EXPOSED SOLDER MASK

OPENING METAL OPENING

NON SOLDER MASK

DEFINED SOLDER MASK DEFINED (PREFERRED)

SOLDER MASK DETAILS

4219037/A   06/2019

NOTES: (continued)

4. This package is designed to be soldered to a thermal pad on the board. For more information, see Texas Instruments literature

`    `number SLUA271 (www.ti.com/lit/slua271).

5. Vias are optional depending on application, refer to device data sheet. If any vias are implemented, refer to their locations shown     on this view. It is recommended that vias under paste be filled, plugged or tented.![ref17]

![ref18]

**EXAMPLE STENCIL DESIGN**

**RGV0016A VQFN - 1 mm max height![ref16]**

PLASTIC QUAD FLATPACK - NO LEAD

(0.58) TYP ![](Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.102.png)16 13

16X (0.75)

16X (0.305) 1 12

(0.58) TYP SYMM  17

12X (0.65) (3.65)

4X (0.96)

4

9

(R0.05) TYP

5 8

4X (0.96)

SYMM (3.65)

SOLDER PASTE EXAMPLE BASED ON 0.125 MM THICK STENCIL

SCALE: 20X

EXPOSED PAD 17

79% PRINTED SOLDER COVERAGE BY AREA UNDER PACKAGE

4219037/A   06/2019

NOTES: (continued)

6. Laser cutting apertures with trapezoidal walls and rounded corners may offer better paste release. IPC-7525 may have alternate    design recommendations. ![ref17]

![ref18]

www.ti.com

**IMPORTANT NOTICE AND DISCLAIMER**

TI PROVIDES TECHNICAL AND RELIABILITY DATA (INCLUDING DATA SHEETS), DESIGN RESOURCES (INCLUDING REFERENCE DESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND OTHER RESOURCES “AS IS” AND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED WARRANTIES OF MERCHANTABILIT Y, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY RIGHTS.

These resources are intended for skilled developers designing with TI products. You are solely responsible for (1) selecting the appropriate TI products for your application, (2) designing, validating and testing your application, and (3) ensuring your application meets applicable standards, and any other safety, security, regulatory or other requirements.

These resources are subject to change without notice. TI grants you permission to use these resources only for development of an application that uses the TI products described in the resource. Other reproduction and display of these resources is prohibited. No license is granted to any other TI intellectual property right or to any third party intellectual property right. TI disclaims responsibility for, and you will fully indemnify TI and its representatives against, any claims, damages, costs, losses, and liabilities arising out of your use of these resources.

TI’s products are provided subject to [TI’s  Terms of Sale](https://www.ti.com/legal/terms-conditions/terms-of-sale.html) or other applicable terms available either [on ti.com](https://www.ti.com) or provided in conjunction with such TI products. TI’s provision of these resources does not expand or otherwise alter TI’s applicable warranties or warranty disclaimers for TI products.

TI objects to and rejects any additional or different terms you may have proposed. 

Mailing Address: Texas Instruments, Post Office Box 655303, Dallas, Texas 75265 Copyright © 2024, Texas Instruments Incorporated

[ref1]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.007.png
[ref2]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.011.png
[ref3]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.012.png
[ref4]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.016.png
[ref5]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.066.png
[ref6]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.067.png
[ref7]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.069.png
[ref8]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.070.png
[ref9]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.079.png
[ref10]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.080.png
[ref11]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.081.png
[ref12]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.082.png
[ref13]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.083.png
[ref14]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.084.png
[ref15]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.089.png
[ref16]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.097.png
[ref17]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.099.png
[ref18]: Aspose.Words.284a49be-89f1-4342-b7fb-423b1a8548c2.100.png
